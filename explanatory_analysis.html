<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Combined dataset</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="explanatory_analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="explanatory_analysis_files/libs/quarto-html/quarto.js"></script>
<script src="explanatory_analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="explanatory_analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="explanatory_analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="explanatory_analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="explanatory_analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="explanatory_analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="explanatory_analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="explanatory_analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Combined dataset</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="snap-participation-rates" class="level2">
<h2 class="anchored" data-anchor-id="snap-participation-rates">SNAP Participation Rates</h2>
<p>NOTE: CT changed how their counties are organized, so the county groupings from 2015-2019 no longer seem to apply - can ask Alena about this, but seems like we may just want to drop. AK also added a county, but it seems like most of them are still the same, so it should be ok to include.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Silence messages from tidycensus</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tidycensus.quiet =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>counties_filepath <span class="ot">&lt;-</span> <span class="st">"data/snap-zip-fns388a-4"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>counties_filelist <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> counties_filepath, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.xlsx?$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to read in SNAP county data files downloaded from FNS</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>read_snap_file <span class="ot">&lt;-</span> <span class="cf">function</span>(file_path) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  snap_df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">skip =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> <span class="fu">clean_names</span>()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  snap_df <span class="ot">&lt;-</span> snap_df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">matches</span>(<span class="st">"^</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">.|^x</span><span class="sc">\\</span><span class="st">d+$"</span>))  <span class="co"># drop empty columns</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  file_name <span class="ot">&lt;-</span> <span class="fu">basename</span>(file_path)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  file_month <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(file_name, <span class="st">"^[A-Za-z]+(?=</span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">d{4})"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  year <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(file_name, <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}(?=</span><span class="sc">\\</span><span class="st">.)"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  snap_df <span class="ot">&lt;-</span> snap_df <span class="sc">|&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">month =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        file_month <span class="sc">==</span> <span class="st">"JUL"</span> <span class="sc">~</span> <span class="dv">7</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        file_month <span class="sc">==</span> <span class="st">"Jul"</span> <span class="sc">~</span> <span class="dv">7</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        file_month <span class="sc">==</span> <span class="st">"July"</span> <span class="sc">~</span> <span class="dv">7</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">year =</span> year,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_code =</span> <span class="fu">str_sub</span>(substate_region, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">county_code =</span> <span class="fu">str_sub</span>(substate_region, <span class="dv">3</span>, <span class="dv">5</span>),</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">GEOID =</span> <span class="fu">str_sub</span>(substate_region, <span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>      year, month, GEOID, state_code, county_code,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>      calc_snap_total_pa_and_non_pa_households</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, month, state_code, county_code, GEOID) <span class="sc">|&gt;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">fns_snap_households =</span> <span class="fu">sum</span>(calc_snap_total_pa_and_non_pa_households)) <span class="sc">|&gt;</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(state_code, <span class="st">"</span><span class="sc">\\</span><span class="st">D"</span>))</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(snap_df)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>fns_snap_county <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(counties_filelist, <span class="fu">possibly</span>(read_snap_file, <span class="at">otherwise =</span> <span class="cn">NULL</span>)) <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">|&gt;</span>  </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2015</span>,<span class="dv">2016</span>,<span class="dv">2017</span>,<span class="dv">2018</span>,<span class="dv">2019</span>,<span class="dv">2023</span>)) <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, GEOID, state_code, county_code) <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">fns_snap_households =</span> <span class="fu">round</span>(<span class="fu">mean</span>(fns_snap_households)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2845 / R2845C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2850 / R2850C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2863 / R2863C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2880 / R2880C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2800 / R2800C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2768 / R2768C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2788 / R2788C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2845 / R2845C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2826 / R2826C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2927 / R2927C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3476 / R3476C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3174 / R3174C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2893 / R2893C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2873 / R2873C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2763 / R2763C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2721 / R2721C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2783 / R2783C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2773 / R2773C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2826 / R2826C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2712 / R2712C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2710 / R2710C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2703 / R2703C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2683 / R2683C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2738 / R2738C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2734 / R2734C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2733 / R2733C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2637 / R2637C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2842 / R2842C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2850 / R2850C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2876 / R2876C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2786 / R2786C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2787 / R2787C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2766 / R2766C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2907 / R2907C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2850 / R2850C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2813 / R2813C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3442 / R3442C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3358 / R3358C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3044 / R3044C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2794 / R2794C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2747 / R2747C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2762 / R2762C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2723 / R2723C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2776 / R2776C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2777 / R2777C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2712 / R2712C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2712 / R2712C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2703 / R2703C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2678 / R2678C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2678 / R2678C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2683 / R2683C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2733 / R2733C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2734 / R2734C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2731 / R2731C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
`summarise()` has grouped output by 'year', 'GEOID', 'state_code'. You can
override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>snap_all <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(counties_filelist, <span class="fu">possibly</span>(read_snap_file, <span class="at">otherwise =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2845 / R2845C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2850 / R2850C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2863 / R2863C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2880 / R2880C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2800 / R2800C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2768 / R2768C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2788 / R2788C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2845 / R2845C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2826 / R2826C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2927 / R2927C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3476 / R3476C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3174 / R3174C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2893 / R2893C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2873 / R2873C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2763 / R2763C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2721 / R2721C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2783 / R2783C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2773 / R2773C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2826 / R2826C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2712 / R2712C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2710 / R2710C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2703 / R2703C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2683 / R2683C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2738 / R2738C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2734 / R2734C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2733 / R2733C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2637 / R2637C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2842 / R2842C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2850 / R2850C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2876 / R2876C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2786 / R2786C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2787 / R2787C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2766 / R2766C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2907 / R2907C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2850 / R2850C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2813 / R2813C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3442 / R3442C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3358 / R3358C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B3044 / R3044C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2794 / R2794C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2747 / R2747C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2762 / R2762C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2723 / R2723C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2776 / R2776C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2777 / R2777C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2712 / R2712C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2712 / R2712C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2704 / R2704C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2703 / R2703C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2678 / R2678C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2678 / R2678C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2683 / R2683C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2733 / R2733C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2734 / R2734C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in B2731 / R2731C2: got 'a  Automated system generated estimate
b  Budget analyst generated estimate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
New names:
`summarise()` has grouped output by 'year', 'month', 'state_code',
'county_code'. You can override using the `.groups` argument.
• `` -&gt; `...3`
• `` -&gt; `...5`
• `` -&gt; `...7`
• `` -&gt; `...9`
• `` -&gt; `...11`
• `` -&gt; `...13`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(snap_all<span class="sc">$</span>year, snap_all<span class="sc">$</span>month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      
          1    7
  1989 2838 2835
  1990 2835 2835
  1991 2836 2837
  1992 2838 2742
  1993 2744 2745
  1994 2726 2725
  1995 2727 2723
  1996 2725 2724
  1997 2724 2717
  1998 2654 2702
  1999 2702 2689
  2000 2704 2691
  2001 2696 2700
  2002 2716 2649
  2003 2638 2622
  2004 2624 2625
  2005 2635 2640
  2006 2637 2639
  2007 2639 2525
  2008 2525 2525
  2009 2524 2521
  2010 2521 2521
  2011 2521 2521
  2012 2521 2495
  2013 2495 2495
  2014 2496 2496
  2015 2551 2549
  2016 2550 2550
  2017 2549 2548
  2018 2450 2449
  2019 2550 2515
  2020 2549 2549
  2021 2449 2549
  2022 2549 2549
  2023    0 2549</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to read in SNAP state totals downloaded from FNS</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>read_state_totals <span class="ot">&lt;-</span> <span class="cf">function</span>(file_path) {</span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>  filename <span class="ot">&lt;-</span> <span class="fu">basename</span>(file_path)</span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a>  FY <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(filename, <span class="st">"(?&lt;=FY)</span><span class="sc">\\</span><span class="st">d{2}"</span>))</span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a>  FY <span class="ot">&lt;-</span> <span class="dv">2000</span> <span class="sc">+</span> FY</span>
<span id="cb240-6"><a href="#cb240-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (FY <span class="sc">&gt;</span> <span class="dv">2019</span>) {</span>
<span id="cb240-7"><a href="#cb240-7" aria-hidden="true" tabindex="-1"></a>    rows_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb240-8"><a href="#cb240-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">NERO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>), </span>
<span id="cb240-9"><a href="#cb240-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">MARO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>), </span>
<span id="cb240-10"><a href="#cb240-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">SERO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>), </span>
<span id="cb240-11"><a href="#cb240-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">MWRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>), </span>
<span id="cb240-12"><a href="#cb240-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">SWRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>), </span>
<span id="cb240-13"><a href="#cb240-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">MPRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>), </span>
<span id="cb240-14"><a href="#cb240-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">WRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>, <span class="st">"A128:B140"</span>))</span>
<span id="cb240-15"><a href="#cb240-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb240-16"><a href="#cb240-16" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (FY <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2016</span>)) {</span>
<span id="cb240-17"><a href="#cb240-17" aria-hidden="true" tabindex="-1"></a>    rows_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb240-18"><a href="#cb240-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">NERO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>), </span>
<span id="cb240-19"><a href="#cb240-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">MARO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A85:B97"</span>, <span class="st">"A115:B127"</span>), </span>
<span id="cb240-20"><a href="#cb240-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">SERO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>), </span>
<span id="cb240-21"><a href="#cb240-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">MWRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>), </span>
<span id="cb240-22"><a href="#cb240-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">SWRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>), </span>
<span id="cb240-23"><a href="#cb240-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">MPRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>, <span class="st">"A128:B140"</span>, <span class="st">"A143:B155"</span>), </span>
<span id="cb240-24"><a href="#cb240-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">WRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A25:B37"</span>, <span class="st">"A40:B52"</span>, <span class="st">"A70:B82"</span>, <span class="st">"A85:B97"</span>, <span class="st">"A100:B112"</span>, <span class="st">"A115:B127"</span>, <span class="st">"A130:B142"</span>))</span>
<span id="cb240-25"><a href="#cb240-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-26"><a href="#cb240-26" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb240-27"><a href="#cb240-27" aria-hidden="true" tabindex="-1"></a>    rows_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb240-28"><a href="#cb240-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">NERO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>), </span>
<span id="cb240-29"><a href="#cb240-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">MARO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A85:B97"</span>, <span class="st">"A100:B112"</span>), </span>
<span id="cb240-30"><a href="#cb240-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">SERO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>), </span>
<span id="cb240-31"><a href="#cb240-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">MWRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>), </span>
<span id="cb240-32"><a href="#cb240-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">SWRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>), </span>
<span id="cb240-33"><a href="#cb240-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">MPRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A23:B35"</span>, <span class="st">"A38:B50"</span>, <span class="st">"A53:B65"</span>, <span class="st">"A68:B80"</span>, <span class="st">"A83:B95"</span>, <span class="st">"A98:B110"</span>, <span class="st">"A113:B125"</span>), </span>
<span id="cb240-34"><a href="#cb240-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">WRO =</span> <span class="fu">c</span>(<span class="st">"A8:B20"</span>, <span class="st">"A25:B37"</span>, <span class="st">"A55:B67"</span>, <span class="st">"A70:B82"</span>, <span class="st">"A85:B97"</span>, <span class="st">"A100:B112"</span>, <span class="st">"A115:B127"</span>))</span>
<span id="cb240-35"><a href="#cb240-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb240-36"><a href="#cb240-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb240-37"><a href="#cb240-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="fu">names</span>(rows_list), <span class="cf">function</span>(sheet_name) {</span>
<span id="cb240-38"><a href="#cb240-38" aria-hidden="true" tabindex="-1"></a>    ranges <span class="ot">&lt;-</span> rows_list[[sheet_name]]</span>
<span id="cb240-39"><a href="#cb240-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-40"><a href="#cb240-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_dfr</span>(ranges, <span class="cf">function</span>(range) {</span>
<span id="cb240-41"><a href="#cb240-41" aria-hidden="true" tabindex="-1"></a>      df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(file_path, <span class="at">sheet =</span> sheet_name, <span class="at">range =</span> range, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb240-42"><a href="#cb240-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-43"><a href="#cb240-43" aria-hidden="true" tabindex="-1"></a>      df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb240-44"><a href="#cb240-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"month"</span>, <span class="st">"households"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb240-45"><a href="#cb240-45" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb240-46"><a href="#cb240-46" aria-hidden="true" tabindex="-1"></a>          <span class="at">state_name =</span> month[<span class="dv">1</span>],</span>
<span id="cb240-47"><a href="#cb240-47" aria-hidden="true" tabindex="-1"></a>          <span class="at">year =</span> <span class="fu">str_extract</span>(month, <span class="st">"20</span><span class="sc">\\</span><span class="st">d{2}"</span>),</span>
<span id="cb240-48"><a href="#cb240-48" aria-hidden="true" tabindex="-1"></a>          <span class="at">month =</span> <span class="fu">str_sub</span>(month, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb240-49"><a href="#cb240-49" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span></span>
<span id="cb240-50"><a href="#cb240-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(households))</span>
<span id="cb240-51"><a href="#cb240-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-52"><a href="#cb240-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(df)</span>
<span id="cb240-53"><a href="#cb240-53" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb240-54"><a href="#cb240-54" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb240-55"><a href="#cb240-55" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb240-56"><a href="#cb240-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-57"><a href="#cb240-57" aria-hidden="true" tabindex="-1"></a>state_filepath <span class="ot">&lt;-</span> <span class="st">"data/snap_state_totals"</span></span>
<span id="cb240-58"><a href="#cb240-58" aria-hidden="true" tabindex="-1"></a>state_filelist <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> state_filepath, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.xlsx?$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb240-59"><a href="#cb240-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-60"><a href="#cb240-60" aria-hidden="true" tabindex="-1"></a>fns_state_totals <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(state_filelist, read_state_totals) <span class="sc">|&gt;</span></span>
<span id="cb240-61"><a href="#cb240-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2020</span>, <span class="dv">2022</span>, <span class="dv">2024</span>)) <span class="sc">|&gt;</span></span>
<span id="cb240-62"><a href="#cb240-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state_name) <span class="sc">|&gt;</span></span>
<span id="cb240-63"><a href="#cb240-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">fns_snap_households =</span> <span class="fu">round</span>(<span class="fu">mean</span>(households)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.
• `` -&gt; `...1`
• `` -&gt; `...2`</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pull in SNAP data from ACS</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>acs_years <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2023</span>)</span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>acs_snap_county <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a>  acs_years, </span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">get_acs</span>(</span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">geography =</span> <span class="st">"county"</span>,</span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_households =</span> <span class="st">"B22001_001"</span>,</span>
<span id="cb242-10"><a href="#cb242-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">acs_snap_households  =</span> <span class="st">"B22001_002"</span></span>
<span id="cb242-11"><a href="#cb242-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb242-12"><a href="#cb242-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> .x,</span>
<span id="cb242-13"><a href="#cb242-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">survey =</span> <span class="st">"acs5"</span>,</span>
<span id="cb242-14"><a href="#cb242-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">geometry =</span> <span class="cn">FALSE</span>,</span>
<span id="cb242-15"><a href="#cb242-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">cache_table =</span> <span class="cn">TRUE</span></span>
<span id="cb242-16"><a href="#cb242-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">year =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb242-17"><a href="#cb242-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, GEOID, NAME, variable, estimate) <span class="sc">|&gt;</span></span>
<span id="cb242-18"><a href="#cb242-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> estimate) <span class="sc">|&gt;</span></span>
<span id="cb242-19"><a href="#cb242-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb242-20"><a href="#cb242-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">acs_snap_rate =</span> acs_snap_households <span class="sc">/</span> total_households,</span>
<span id="cb242-21"><a href="#cb242-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_fips =</span> <span class="fu">str_sub</span>(GEOID, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb242-22"><a href="#cb242-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb242-23"><a href="#cb242-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>state_fips <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"60"</span>, <span class="st">"66"</span>, <span class="st">"69"</span>, <span class="st">"72"</span>, <span class="st">"78"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2011-2015 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2012-2016 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2013-2017 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2014-2018 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2015-2019 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2019-2023 5-year ACS</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>acs_state_totals <span class="ot">&lt;-</span> acs_snap_county <span class="sc">|&gt;</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state_fips) <span class="sc">|&gt;</span></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">acs_snap_households =</span> <span class="fu">sum</span>(acs_snap_households))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>state_fips <span class="ot">&lt;-</span> fips_codes <span class="sc">|&gt;</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_code, state_name) <span class="sc">|&gt;</span></span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(state_code, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a>acs_inflators <span class="ot">&lt;-</span> fns_state_totals <span class="sc">|&gt;</span></span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(state_fips, <span class="at">by =</span> <span class="st">"state_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">|&gt;</span></span>
<span id="cb251-8"><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_state_totals, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_code"</span> <span class="ot">=</span> <span class="st">"state_fips"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"year"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb251-9"><a href="#cb251-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state_code) <span class="sc">|&gt;</span></span>
<span id="cb251-10"><a href="#cb251-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inflator =</span> fns_snap_households<span class="sc">/</span>acs_snap_households) <span class="sc">|&gt;</span></span>
<span id="cb251-11"><a href="#cb251-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state_name, state_code, inflator)</span>
<span id="cb251-12"><a href="#cb251-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-13"><a href="#cb251-13" aria-hidden="true" tabindex="-1"></a>acs_snap_county_infl <span class="ot">&lt;-</span> acs_snap_county <span class="sc">|&gt;</span></span>
<span id="cb251-14"><a href="#cb251-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_inflators, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span> <span class="ot">=</span> <span class="st">"state_code"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"year"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb251-15"><a href="#cb251-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">acs_snap_rate_infl =</span> acs_snap_rate<span class="sc">*</span>inflator)</span>
<span id="cb251-16"><a href="#cb251-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-17"><a href="#cb251-17" aria-hidden="true" tabindex="-1"></a>snap_participation <span class="ot">&lt;-</span> acs_snap_county_infl <span class="sc">|&gt;</span></span>
<span id="cb251-18"><a href="#cb251-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(fns_snap_county, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"year"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb251-19"><a href="#cb251-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fns_snap_rate =</span> fns_snap_households<span class="sc">/</span>total_households,</span>
<span id="cb251-20"><a href="#cb251-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">snap_participation_rate =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(fns_snap_rate), fns_snap_rate, acs_snap_rate_infl),</span>
<span id="cb251-21"><a href="#cb251-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">snap_rate_acs =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(fns_snap_rate), <span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb251-22"><a href="#cb251-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, GEOID, state_name, snap_participation_rate, snap_rate_acs)</span>
<span id="cb251-23"><a href="#cb251-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-24"><a href="#cb251-24" aria-hidden="true" tabindex="-1"></a>us_counties <span class="ot">&lt;-</span> <span class="fu">counties</span>(<span class="at">cb =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb251-25"><a href="#cb251-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>STATEFP <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"60"</span>, <span class="st">"66"</span>, <span class="st">"69"</span>, <span class="st">"72"</span>, <span class="st">"78"</span>, <span class="st">"02"</span>, <span class="st">"15"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Retrieving data for the year 2022</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Downloading: 9.6 kB     
Downloading: 9.6 kB     
Downloading: 44 kB     
Downloading: 44 kB     
Downloading: 100 kB     
Downloading: 100 kB     
Downloading: 170 kB     
Downloading: 170 kB     
Downloading: 230 kB     
Downloading: 230 kB     
Downloading: 260 kB     
Downloading: 260 kB     
Downloading: 280 kB     
Downloading: 280 kB     
Downloading: 310 kB     
Downloading: 310 kB     
Downloading: 340 kB     
Downloading: 340 kB     
Downloading: 360 kB     
Downloading: 360 kB     
Downloading: 410 kB     
Downloading: 410 kB     
Downloading: 510 kB     
Downloading: 510 kB     
Downloading: 520 kB     
Downloading: 520 kB     
Downloading: 540 kB     
Downloading: 540 kB     
Downloading: 560 kB     
Downloading: 560 kB     
Downloading: 570 kB     
Downloading: 570 kB     
Downloading: 590 kB     
Downloading: 590 kB     
Downloading: 600 kB     
Downloading: 600 kB     
Downloading: 640 kB     
Downloading: 640 kB     
Downloading: 750 kB     
Downloading: 750 kB     
Downloading: 770 kB     
Downloading: 770 kB     
Downloading: 820 kB     
Downloading: 820 kB     
Downloading: 830 kB     
Downloading: 830 kB     
Downloading: 870 kB     
Downloading: 870 kB     
Downloading: 900 kB     
Downloading: 900 kB     
Downloading: 960 kB     
Downloading: 960 kB     
Downloading: 1 MB     
Downloading: 1 MB     
Downloading: 1.1 MB     
Downloading: 1.1 MB     
Downloading: 1.1 MB     
Downloading: 1.1 MB     
Downloading: 1.1 MB     
Downloading: 1.1 MB     
Downloading: 1.2 MB     
Downloading: 1.2 MB     
Downloading: 1.2 MB     
Downloading: 1.2 MB     
Downloading: 1.2 MB     
Downloading: 1.2 MB     
Downloading: 1.2 MB     
Downloading: 1.2 MB     
Downloading: 1.3 MB     
Downloading: 1.3 MB     
Downloading: 1.4 MB     
Downloading: 1.4 MB     
Downloading: 1.5 MB     
Downloading: 1.5 MB     
Downloading: 1.5 MB     
Downloading: 1.5 MB     
Downloading: 1.7 MB     
Downloading: 1.7 MB     
Downloading: 1.8 MB     
Downloading: 1.8 MB     
Downloading: 1.9 MB     
Downloading: 1.9 MB     
Downloading: 1.9 MB     
Downloading: 1.9 MB     
Downloading: 1.9 MB     
Downloading: 1.9 MB     
Downloading: 2 MB     
Downloading: 2 MB     
Downloading: 2.1 MB     
Downloading: 2.1 MB     
Downloading: 2.1 MB     
Downloading: 2.1 MB     
Downloading: 2.2 MB     
Downloading: 2.2 MB     
Downloading: 2.2 MB     
Downloading: 2.2 MB     
Downloading: 2.2 MB     
Downloading: 2.2 MB     
Downloading: 2.2 MB     
Downloading: 2.2 MB     
Downloading: 2.3 MB     
Downloading: 2.3 MB     
Downloading: 2.3 MB     
Downloading: 2.3 MB     
Downloading: 2.3 MB     
Downloading: 2.3 MB     
Downloading: 2.5 MB     
Downloading: 2.5 MB     
Downloading: 2.5 MB     
Downloading: 2.5 MB     
Downloading: 2.6 MB     
Downloading: 2.6 MB     
Downloading: 2.8 MB     
Downloading: 2.8 MB     
Downloading: 2.8 MB     
Downloading: 2.8 MB     
Downloading: 2.9 MB     
Downloading: 2.9 MB     
Downloading: 3 MB     
Downloading: 3 MB     
Downloading: 3 MB     
Downloading: 3 MB     
Downloading: 3.1 MB     
Downloading: 3.1 MB     
Downloading: 3.2 MB     
Downloading: 3.2 MB     
Downloading: 3.2 MB     
Downloading: 3.2 MB     
Downloading: 3.3 MB     
Downloading: 3.3 MB     
Downloading: 3.4 MB     
Downloading: 3.4 MB     
Downloading: 3.4 MB     
Downloading: 3.4 MB     
Downloading: 3.4 MB     
Downloading: 3.4 MB     
Downloading: 3.6 MB     
Downloading: 3.6 MB     
Downloading: 3.6 MB     
Downloading: 3.6 MB     
Downloading: 3.7 MB     
Downloading: 3.7 MB     
Downloading: 3.8 MB     
Downloading: 3.8 MB     
Downloading: 3.8 MB     
Downloading: 3.8 MB     
Downloading: 3.8 MB     
Downloading: 3.8 MB     
Downloading: 3.9 MB     
Downloading: 3.9 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4 MB     
Downloading: 4.1 MB     
Downloading: 4.1 MB     
Downloading: 4.1 MB     
Downloading: 4.1 MB     
Downloading: 4.1 MB     
Downloading: 4.1 MB     
Downloading: 4.4 MB     
Downloading: 4.4 MB     
Downloading: 4.4 MB     
Downloading: 4.4 MB     
Downloading: 4.5 MB     
Downloading: 4.5 MB     
Downloading: 4.5 MB     
Downloading: 4.5 MB     
Downloading: 4.5 MB     
Downloading: 4.5 MB     
Downloading: 4.5 MB     
Downloading: 4.5 MB     
Downloading: 4.7 MB     
Downloading: 4.7 MB     
Downloading: 4.7 MB     
Downloading: 4.7 MB     
Downloading: 4.7 MB     
Downloading: 4.7 MB     
Downloading: 4.7 MB     
Downloading: 4.7 MB     
Downloading: 4.8 MB     
Downloading: 4.8 MB     
Downloading: 4.8 MB     
Downloading: 4.8 MB     
Downloading: 4.9 MB     
Downloading: 4.9 MB     
Downloading: 5.1 MB     
Downloading: 5.1 MB     
Downloading: 5.2 MB     
Downloading: 5.2 MB     
Downloading: 5.2 MB     
Downloading: 5.2 MB     
Downloading: 5.2 MB     
Downloading: 5.2 MB     
Downloading: 5.4 MB     
Downloading: 5.4 MB     
Downloading: 5.5 MB     
Downloading: 5.5 MB     
Downloading: 5.5 MB     
Downloading: 5.5 MB     
Downloading: 5.5 MB     
Downloading: 5.5 MB     
Downloading: 5.5 MB     
Downloading: 5.5 MB     
Downloading: 5.6 MB     
Downloading: 5.6 MB     
Downloading: 5.6 MB     
Downloading: 5.6 MB     
Downloading: 5.6 MB     
Downloading: 5.6 MB     
Downloading: 5.6 MB     
Downloading: 5.6 MB     
Downloading: 5.7 MB     
Downloading: 5.7 MB     
Downloading: 5.7 MB     
Downloading: 5.7 MB     
Downloading: 5.7 MB     
Downloading: 5.7 MB     
Downloading: 5.9 MB     
Downloading: 5.9 MB     
Downloading: 5.9 MB     
Downloading: 5.9 MB     
Downloading: 5.9 MB     
Downloading: 5.9 MB     
Downloading: 5.9 MB     
Downloading: 5.9 MB     
Downloading: 6.2 MB     
Downloading: 6.2 MB     
Downloading: 6.2 MB     
Downloading: 6.2 MB     
Downloading: 6.4 MB     
Downloading: 6.4 MB     
Downloading: 6.6 MB     
Downloading: 6.6 MB     
Downloading: 6.7 MB     
Downloading: 6.7 MB     
Downloading: 6.8 MB     
Downloading: 6.8 MB     
Downloading: 6.8 MB     
Downloading: 6.8 MB     
Downloading: 7 MB     
Downloading: 7 MB     
Downloading: 7.2 MB     
Downloading: 7.2 MB     
Downloading: 7.2 MB     
Downloading: 7.2 MB     
Downloading: 7.2 MB     
Downloading: 7.2 MB     
Downloading: 7.2 MB     
Downloading: 7.2 MB     
Downloading: 7.3 MB     
Downloading: 7.3 MB     
Downloading: 7.3 MB     
Downloading: 7.3 MB     
Downloading: 7.3 MB     
Downloading: 7.3 MB     
Downloading: 7.4 MB     
Downloading: 7.4 MB     
Downloading: 7.4 MB     
Downloading: 7.4 MB     
Downloading: 7.6 MB     
Downloading: 7.6 MB     
Downloading: 7.6 MB     
Downloading: 7.6 MB     
Downloading: 7.7 MB     
Downloading: 7.7 MB     
Downloading: 7.8 MB     
Downloading: 7.8 MB     
Downloading: 7.9 MB     
Downloading: 7.9 MB     
Downloading: 8 MB     
Downloading: 8 MB     
Downloading: 8 MB     
Downloading: 8 MB     
Downloading: 8.1 MB     
Downloading: 8.1 MB     
Downloading: 8.2 MB     
Downloading: 8.2 MB     
Downloading: 8.3 MB     
Downloading: 8.3 MB     
Downloading: 8.3 MB     
Downloading: 8.3 MB     
Downloading: 8.3 MB     
Downloading: 8.3 MB     
Downloading: 8.6 MB     
Downloading: 8.6 MB     
Downloading: 8.6 MB     
Downloading: 8.6 MB     
Downloading: 8.6 MB     
Downloading: 8.6 MB     
Downloading: 8.7 MB     
Downloading: 8.7 MB     
Downloading: 8.9 MB     
Downloading: 8.9 MB     
Downloading: 8.9 MB     
Downloading: 8.9 MB     
Downloading: 9 MB     
Downloading: 9 MB     
Downloading: 9 MB     
Downloading: 9 MB     
Downloading: 9.2 MB     
Downloading: 9.2 MB     
Downloading: 9.4 MB     
Downloading: 9.4 MB     
Downloading: 9.4 MB     
Downloading: 9.4 MB     
Downloading: 9.5 MB     
Downloading: 9.5 MB     
Downloading: 9.5 MB     
Downloading: 9.5 MB     
Downloading: 9.6 MB     
Downloading: 9.6 MB     
Downloading: 9.6 MB     
Downloading: 9.6 MB     
Downloading: 9.7 MB     
Downloading: 9.7 MB     
Downloading: 9.8 MB     
Downloading: 9.8 MB     
Downloading: 9.8 MB     
Downloading: 9.8 MB     
Downloading: 9.9 MB     
Downloading: 9.9 MB     
Downloading: 9.9 MB     
Downloading: 9.9 MB     
Downloading: 9.9 MB     
Downloading: 9.9 MB     
Downloading: 9.9 MB     
Downloading: 9.9 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 10 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 11 MB     
Downloading: 12 MB     
Downloading: 12 MB     
Downloading: 12 MB     
Downloading: 12 MB     
Downloading: 12 MB     
Downloading: 12 MB     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>snap_map <span class="ot">&lt;-</span> us_counties <span class="sc">|&gt;</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(snap_participation, <span class="at">by =</span> <span class="st">"GEOID"</span>)</span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a>snap_map <span class="sc">|&gt;</span></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">|&gt;</span></span>
<span id="cb254-6"><a href="#cb254-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb254-7"><a href="#cb254-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> snap_participation_rate)) <span class="sc">+</span></span>
<span id="cb254-8"><a href="#cb254-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#cfe8f3"</span>, <span class="at">high =</span> <span class="st">"#062635"</span>) <span class="sc">+</span></span>
<span id="cb254-9"><a href="#cb254-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(us_counties<span class="sc">$</span>STATE_NAME)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
             Alabama              Arizona             Arkansas 
                  67                   15                   75 
          California             Colorado          Connecticut 
                  58                   64                    9 
            Delaware District of Columbia              Florida 
                   3                    1                   67 
             Georgia                Idaho             Illinois 
                 159                   44                  102 
             Indiana                 Iowa               Kansas 
                  92                   99                  105 
            Kentucky            Louisiana                Maine 
                 120                   64                   16 
            Maryland        Massachusetts             Michigan 
                  24                   14                   83 
           Minnesota          Mississippi             Missouri 
                  87                   82                  115 
             Montana             Nebraska               Nevada 
                  56                   93                   17 
       New Hampshire           New Jersey           New Mexico 
                  10                   21                   33 
            New York       North Carolina         North Dakota 
                  62                  100                   53 
                Ohio             Oklahoma               Oregon 
                  88                   77                   36 
        Pennsylvania         Rhode Island       South Carolina 
                  67                    5                   46 
        South Dakota            Tennessee                Texas 
                  66                   95                  254 
                Utah              Vermont             Virginia 
                  29                   14                  133 
          Washington        West Virginia            Wisconsin 
                  39                   55                   72 
             Wyoming 
                  23 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(snap_participation<span class="sc">$</span>state_name,snap_participation<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      
                       2015 2016 2017 2018 2019 2023
  Alabama                67   67   67   67   67   67
  Alaska                 29   29   29   29   29   30
  Arizona                15   15   15   15   15   15
  Arkansas               75   75   75   75   75   75
  California             58   58   58   58   58   58
  Colorado               64   64   64   64   64   64
  Connecticut             8    8    8    8    8    9
  Delaware                3    3    3    3    3    3
  District of Columbia    1    1    1    1    1    1
  Florida                67   67   67   67   67   67
  Georgia               159  159  159  159  159  159
  Hawaii                  5    5    5    5    5    5
  Idaho                  44   44   44   44   44   44
  Illinois              102  102  102  102  102  102
  Indiana                92   92   92   92   92   92
  Iowa                   99   99   99   99   99   99
  Kansas                105  105  105  105  105  105
  Kentucky              120  120  120  120  120  120
  Louisiana              64   64   64   64   64   64
  Maine                  16   16   16   16   16   16
  Maryland               24   24   24   24   24   24
  Massachusetts          14   14   14   14   14   14
  Michigan               83   83   83   83   83   83
  Minnesota              87   87   87   87   87   87
  Mississippi            82   82   82   82   82   82
  Missouri              115  115  115  115  115  115
  Montana                56   56   56   56   56   56
  Nebraska               93   93   93   93   93   93
  Nevada                 17   17   17   17   17   17
  New Hampshire          10   10   10   10   10   10
  New Jersey             21   21   21   21   21   21
  New Mexico             33   33   33   33   33   33
  New York               62   62   62   62   62   62
  North Carolina        100  100  100  100  100  100
  North Dakota           53   53   53   53   53   53
  Ohio                   88   88   88   88   88   88
  Oklahoma               77   77   77   77   77   77
  Oregon                 36   36   36   36   36   36
  Pennsylvania           67   67   67   67   67   67
  Rhode Island            5    5    5    5    5    5
  South Carolina         46   46   46   46   46   46
  South Dakota           66   66   66   66   66   66
  Tennessee              95   95   95   95   95   95
  Texas                 254  254  254  254  254  254
  Utah                   29   29   29   29   29   29
  Vermont                14   14   14   14   14   14
  Virginia              133  133  133  133  133  133
  Washington             39   39   39   39   39   39
  West Virginia          55   55   55   55   55   55
  Wisconsin              72   72   72   72   72   72
  Wyoming                23   23   23   23   23   23</code></pre>
</div>
</div>
</section>
<section id="demographic-and-economic-predictors" class="level2">
<h2 class="anchored" data-anchor-id="demographic-and-economic-predictors">Demographic and Economic Predictors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Census Data</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="do">#######</span></span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a>census_vars <span class="ot">&lt;-</span> tidycensus<span class="sc">::</span><span class="fu">load_variables</span>(<span class="at">year =</span> <span class="dv">2016</span>,</span>
<span id="cb259-4"><a href="#cb259-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">dataset =</span> <span class="fu">c</span>(<span class="st">"acs5"</span>))</span>
<span id="cb259-5"><a href="#cb259-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-6"><a href="#cb259-6" aria-hidden="true" tabindex="-1"></a><span class="co">#B06011_001E is median income</span></span>
<span id="cb259-7"><a href="#cb259-7" aria-hidden="true" tabindex="-1"></a><span class="co">#B19013_001 is median household income in past 12 months (colinearity w/median income?)</span></span>
<span id="cb259-8"><a href="#cb259-8" aria-hidden="true" tabindex="-1"></a><span class="co">#B01001_001E is total population</span></span>
<span id="cb259-9"><a href="#cb259-9" aria-hidden="true" tabindex="-1"></a><span class="co">#B01001_002E is number of males</span></span>
<span id="cb259-10"><a href="#cb259-10" aria-hidden="true" tabindex="-1"></a><span class="co">#B17001_002E is number below poverty line</span></span>
<span id="cb259-11"><a href="#cb259-11" aria-hidden="true" tabindex="-1"></a><span class="co">#B01002_001 is median age (total)</span></span>
<span id="cb259-12"><a href="#cb259-12" aria-hidden="true" tabindex="-1"></a><span class="co">#B03002_003 is total number of non-hispanic white (_001 is overall)</span></span>
<span id="cb259-13"><a href="#cb259-13" aria-hidden="true" tabindex="-1"></a><span class="co">#B15003_017 to _025 is education attainment levels</span></span>
<span id="cb259-14"><a href="#cb259-14" aria-hidden="true" tabindex="-1"></a><span class="co">#B11001_002 is number of family households (_001 is overall)</span></span>
<span id="cb259-15"><a href="#cb259-15" aria-hidden="true" tabindex="-1"></a><span class="co">#B18101_001 is total number disabled status</span></span>
<span id="cb259-16"><a href="#cb259-16" aria-hidden="true" tabindex="-1"></a>      <span class="co">#_004,_007, etc are number that are disabled for age/sex groups</span></span>
<span id="cb259-17"><a href="#cb259-17" aria-hidden="true" tabindex="-1"></a><span class="co">#B25003_003 is total number of renters (_001 is overall)</span></span>
<span id="cb259-18"><a href="#cb259-18" aria-hidden="true" tabindex="-1"></a><span class="co">#B22001_002 is total number of households that received food stamps in prior 12 months (_001 is overall)</span></span>
<span id="cb259-19"><a href="#cb259-19" aria-hidden="true" tabindex="-1"></a><span class="co">#B05001_006 is total number of non-citizens (_001 is overall)</span></span>
<span id="cb259-20"><a href="#cb259-20" aria-hidden="true" tabindex="-1"></a><span class="co">#B01001_020-25 and _044-049 is total over 65 (_001 is overall)</span></span>
<span id="cb259-21"><a href="#cb259-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-22"><a href="#cb259-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-23"><a href="#cb259-23" aria-hidden="true" tabindex="-1"></a>get_snap <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb259-24"><a href="#cb259-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-25"><a href="#cb259-25" aria-hidden="true" tabindex="-1"></a>  available_vars <span class="ot">&lt;-</span> <span class="fu">load_variables</span>(year, <span class="st">"acs5"</span>, <span class="at">cache =</span> <span class="cn">TRUE</span>)<span class="sc">$</span>name</span>
<span id="cb259-26"><a href="#cb259-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-27"><a href="#cb259-27" aria-hidden="true" tabindex="-1"></a>  snap_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"B06011_001E"</span>, <span class="st">"B01001_001E"</span>, <span class="st">"B01001_002E"</span>,</span>
<span id="cb259-28"><a href="#cb259-28" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"B17001_002E"</span>, <span class="st">"B17001_001E"</span>, <span class="st">"B19013_001"</span>,</span>
<span id="cb259-29"><a href="#cb259-29" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"B01002_001"</span>, <span class="st">"B03002_003"</span>, <span class="st">"B03002_001"</span>,</span>
<span id="cb259-30"><a href="#cb259-30" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"B15003_001"</span>, <span class="st">"B15003_017"</span>, <span class="st">"B15003_018"</span>, <span class="st">"B15003_019"</span>,</span>
<span id="cb259-31"><a href="#cb259-31" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"B15003_020"</span>, <span class="st">"B15003_021"</span>, <span class="st">"B15003_022"</span>,</span>
<span id="cb259-32"><a href="#cb259-32" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"B15003_023"</span>, <span class="st">"B15003_024"</span>, <span class="st">"B15003_025"</span>,</span>
<span id="cb259-33"><a href="#cb259-33" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"B11001_002"</span>, <span class="st">"B11001_001"</span>, <span class="st">"B25003_003"</span>,</span>
<span id="cb259-34"><a href="#cb259-34" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"B25003_001"</span>, <span class="st">"B18101_001"</span>, <span class="st">"B22001_002"</span>, <span class="st">"B22001_001"</span>,</span>
<span id="cb259-35"><a href="#cb259-35" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"B18101_004"</span>, <span class="st">"B18101_007"</span>, <span class="st">"B18101_010"</span>, <span class="st">"B18101_013"</span>,</span>
<span id="cb259-36"><a href="#cb259-36" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"B18101_016"</span>, <span class="st">"B18101_019"</span>, <span class="st">"B18101_022"</span>, <span class="st">"B18101_025"</span>,</span>
<span id="cb259-37"><a href="#cb259-37" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"B18101_028"</span>, <span class="st">"B18101_031"</span>, <span class="st">"B05001_006"</span>, <span class="st">"B05001_001"</span>,</span>
<span id="cb259-38"><a href="#cb259-38" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"B01001_020"</span>, <span class="st">"B01001_021"</span>, <span class="st">"B01001_022"</span>, <span class="st">"B01001_023"</span>,</span>
<span id="cb259-39"><a href="#cb259-39" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"B01001_024"</span>, <span class="st">"B01001_025"</span>, <span class="st">"B01001_044"</span>, <span class="st">"B01001_045"</span>,</span>
<span id="cb259-40"><a href="#cb259-40" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"B01001_046"</span>, <span class="st">"B01001_047"</span>, <span class="st">"B01001_048"</span>, <span class="st">"B01001_049"</span>)</span>
<span id="cb259-41"><a href="#cb259-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-42"><a href="#cb259-42" aria-hidden="true" tabindex="-1"></a>  snap_vars_nosuffix <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"E$"</span>, <span class="st">""</span>, snap_vars)</span>
<span id="cb259-43"><a href="#cb259-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-44"><a href="#cb259-44" aria-hidden="true" tabindex="-1"></a>  usable_vars <span class="ot">&lt;-</span> <span class="fu">intersect</span>(snap_vars_nosuffix, available_vars)</span>
<span id="cb259-45"><a href="#cb259-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-46"><a href="#cb259-46" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(usable_vars) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb259-47"><a href="#cb259-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="fu">paste0</span>(<span class="st">"No matching variables available for year "</span>, year))</span>
<span id="cb259-48"><a href="#cb259-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb259-49"><a href="#cb259-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb259-50"><a href="#cb259-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-51"><a href="#cb259-51" aria-hidden="true" tabindex="-1"></a>  census_demo <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"county"</span>,</span>
<span id="cb259-52"><a href="#cb259-52" aria-hidden="true" tabindex="-1"></a>                         <span class="at">variables =</span> usable_vars,</span>
<span id="cb259-53"><a href="#cb259-53" aria-hidden="true" tabindex="-1"></a>                         <span class="at">year =</span> year,</span>
<span id="cb259-54"><a href="#cb259-54" aria-hidden="true" tabindex="-1"></a>                         <span class="at">survey =</span> <span class="st">"acs5"</span>,</span>
<span id="cb259-55"><a href="#cb259-55" aria-hidden="true" tabindex="-1"></a>                         <span class="at">output =</span> <span class="st">"tidy"</span>,</span>
<span id="cb259-56"><a href="#cb259-56" aria-hidden="true" tabindex="-1"></a>                         <span class="at">progress_bar =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb259-57"><a href="#cb259-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> year) <span class="sc">|&gt;</span></span>
<span id="cb259-58"><a href="#cb259-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">case_when</span>(</span>
<span id="cb259-59"><a href="#cb259-59" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B06011_001"</span> <span class="sc">~</span> <span class="st">"median_income_individual"</span>,</span>
<span id="cb259-60"><a href="#cb259-60" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B01001_001"</span> <span class="sc">~</span> <span class="st">"total_population"</span>,</span>
<span id="cb259-61"><a href="#cb259-61" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B01001_002"</span> <span class="sc">~</span> <span class="st">"male_population"</span>,</span>
<span id="cb259-62"><a href="#cb259-62" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B17001_002"</span> <span class="sc">~</span> <span class="st">"below_poverty"</span>,</span>
<span id="cb259-63"><a href="#cb259-63" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B17001_001"</span> <span class="sc">~</span> <span class="st">"poverty_total"</span>,</span>
<span id="cb259-64"><a href="#cb259-64" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B19013_001"</span>  <span class="sc">~</span> <span class="st">"median_household_income"</span>,</span>
<span id="cb259-65"><a href="#cb259-65" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B01002_001"</span>  <span class="sc">~</span> <span class="st">"median_age"</span>,</span>
<span id="cb259-66"><a href="#cb259-66" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B03002_003"</span>  <span class="sc">~</span> <span class="st">"white_alone"</span>,</span>
<span id="cb259-67"><a href="#cb259-67" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B03002_001"</span>  <span class="sc">~</span> <span class="st">"total_race_population"</span>,</span>
<span id="cb259-68"><a href="#cb259-68" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_001"</span>  <span class="sc">~</span> <span class="st">"total_educ"</span>,</span>
<span id="cb259-69"><a href="#cb259-69" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_017"</span>  <span class="sc">~</span> <span class="st">"hs_grad"</span>,</span>
<span id="cb259-70"><a href="#cb259-70" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_018"</span>  <span class="sc">~</span> <span class="st">"ged"</span>,</span>
<span id="cb259-71"><a href="#cb259-71" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_019"</span>  <span class="sc">~</span> <span class="st">"some_college_less_1yr"</span>,</span>
<span id="cb259-72"><a href="#cb259-72" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_020"</span>  <span class="sc">~</span> <span class="st">"some_college"</span>,</span>
<span id="cb259-73"><a href="#cb259-73" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_021"</span>  <span class="sc">~</span> <span class="st">"assoc_degree"</span>,</span>
<span id="cb259-74"><a href="#cb259-74" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_022"</span>  <span class="sc">~</span> <span class="st">"bachelors_degree"</span>,</span>
<span id="cb259-75"><a href="#cb259-75" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_023"</span>  <span class="sc">~</span> <span class="st">"masters_degree"</span>,</span>
<span id="cb259-76"><a href="#cb259-76" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_024"</span>  <span class="sc">~</span> <span class="st">"professional_degree"</span>,</span>
<span id="cb259-77"><a href="#cb259-77" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B15003_025"</span>  <span class="sc">~</span> <span class="st">"doctoral_degree"</span>,</span>
<span id="cb259-78"><a href="#cb259-78" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B11001_002"</span>  <span class="sc">~</span> <span class="st">"family_households"</span>,</span>
<span id="cb259-79"><a href="#cb259-79" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B11001_001"</span>  <span class="sc">~</span> <span class="st">"total_households"</span>,</span>
<span id="cb259-80"><a href="#cb259-80" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B25003_003"</span>  <span class="sc">~</span> <span class="st">"renter_occupied"</span>,</span>
<span id="cb259-81"><a href="#cb259-81" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B25003_001"</span>  <span class="sc">~</span> <span class="st">"total_occupied_housing"</span>,</span>
<span id="cb259-82"><a href="#cb259-82" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B18101_001"</span>  <span class="sc">~</span> <span class="st">"total_disability_universe"</span>,</span>
<span id="cb259-83"><a href="#cb259-83" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B22001_002"</span>  <span class="sc">~</span> <span class="st">"snap_recipient_hh_prior12"</span>,</span>
<span id="cb259-84"><a href="#cb259-84" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B22001_001"</span>  <span class="sc">~</span> <span class="st">"total_snap_universe"</span>,</span>
<span id="cb259-85"><a href="#cb259-85" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B05001_006"</span> <span class="sc">~</span> <span class="st">"non_citizens"</span>,</span>
<span id="cb259-86"><a href="#cb259-86" aria-hidden="true" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">"B05001_001"</span> <span class="sc">~</span> <span class="st">"non_citizens_universe"</span>,</span>
<span id="cb259-87"><a href="#cb259-87" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> variable  <span class="co"># keep original name if no match</span></span>
<span id="cb259-88"><a href="#cb259-88" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb259-89"><a href="#cb259-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-90"><a href="#cb259-90" aria-hidden="true" tabindex="-1"></a>  census_wide <span class="ot">&lt;-</span> census_demo <span class="sc">|&gt;</span></span>
<span id="cb259-91"><a href="#cb259-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, NAME, year, variable, estimate) <span class="sc">|&gt;</span></span>
<span id="cb259-92"><a href="#cb259-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"variable"</span>,</span>
<span id="cb259-93"><a href="#cb259-93" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="st">"estimate"</span>)</span>
<span id="cb259-94"><a href="#cb259-94" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-95"><a href="#cb259-95" aria-hidden="true" tabindex="-1"></a>  census_wide <span class="ot">&lt;-</span> census_wide <span class="sc">|&gt;</span></span>
<span id="cb259-96"><a href="#cb259-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">male_pct =</span> (male_population<span class="sc">/</span>total_population),</span>
<span id="cb259-97"><a href="#cb259-97" aria-hidden="true" tabindex="-1"></a>           <span class="at">white_pct =</span> (white_alone<span class="sc">/</span>total_race_population),</span>
<span id="cb259-98"><a href="#cb259-98" aria-hidden="true" tabindex="-1"></a>           <span class="at">family_pct =</span> (family_households<span class="sc">/</span>total_households),</span>
<span id="cb259-99"><a href="#cb259-99" aria-hidden="true" tabindex="-1"></a>           <span class="at">bachelor_or_higher_pct =</span> ((bachelors_degree <span class="sc">+</span> masters_degree <span class="sc">+</span> </span>
<span id="cb259-100"><a href="#cb259-100" aria-hidden="true" tabindex="-1"></a>                                        professional_degree <span class="sc">+</span> doctoral_degree)<span class="sc">/</span></span>
<span id="cb259-101"><a href="#cb259-101" aria-hidden="true" tabindex="-1"></a>                                       total_educ),</span>
<span id="cb259-102"><a href="#cb259-102" aria-hidden="true" tabindex="-1"></a>           <span class="at">poverty_pct =</span> (below_poverty<span class="sc">/</span>poverty_total),</span>
<span id="cb259-103"><a href="#cb259-103" aria-hidden="true" tabindex="-1"></a>           <span class="at">disabled_pct =</span> ((B18101_004 <span class="sc">+</span> B18101_007 <span class="sc">+</span> B18101_010 <span class="sc">+</span> B18101_013 <span class="sc">+</span></span>
<span id="cb259-104"><a href="#cb259-104" aria-hidden="true" tabindex="-1"></a>                             B18101_016 <span class="sc">+</span> B18101_019 <span class="sc">+</span> B18101_022 <span class="sc">+</span> B18101_025 <span class="sc">+</span></span>
<span id="cb259-105"><a href="#cb259-105" aria-hidden="true" tabindex="-1"></a>                             B18101_028 <span class="sc">+</span> B18101_031)<span class="sc">/</span>total_disability_universe),</span>
<span id="cb259-106"><a href="#cb259-106" aria-hidden="true" tabindex="-1"></a>           <span class="at">snap_pct =</span> (snap_recipient_hh_prior12<span class="sc">/</span>total_snap_universe),</span>
<span id="cb259-107"><a href="#cb259-107" aria-hidden="true" tabindex="-1"></a>           <span class="at">renter_pct =</span> (renter_occupied<span class="sc">/</span>total_occupied_housing),</span>
<span id="cb259-108"><a href="#cb259-108" aria-hidden="true" tabindex="-1"></a>           <span class="at">non_citizen_pct =</span> (non_citizens<span class="sc">/</span>non_citizens_universe),</span>
<span id="cb259-109"><a href="#cb259-109" aria-hidden="true" tabindex="-1"></a>           <span class="at">over_65_pct =</span> ((B01001_020 <span class="sc">+</span> B01001_021 <span class="sc">+</span> B01001_022 <span class="sc">+</span> B01001_023 <span class="sc">+</span> </span>
<span id="cb259-110"><a href="#cb259-110" aria-hidden="true" tabindex="-1"></a>                             B01001_024 <span class="sc">+</span> B01001_025 <span class="sc">+</span> B01001_044 <span class="sc">+</span> B01001_045 <span class="sc">+</span></span>
<span id="cb259-111"><a href="#cb259-111" aria-hidden="true" tabindex="-1"></a>                             B01001_046 <span class="sc">+</span> B01001_047 <span class="sc">+</span> B01001_048 <span class="sc">+</span> B01001_049)<span class="sc">/</span></span>
<span id="cb259-112"><a href="#cb259-112" aria-hidden="true" tabindex="-1"></a>                            total_population)) <span class="sc">|&gt;</span></span>
<span id="cb259-113"><a href="#cb259-113" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, NAME, year, male_pct, median_age, white_pct, family_pct, bachelor_or_higher_pct,</span>
<span id="cb259-114"><a href="#cb259-114" aria-hidden="true" tabindex="-1"></a>           poverty_pct, disabled_pct, snap_pct, renter_pct, median_age,</span>
<span id="cb259-115"><a href="#cb259-115" aria-hidden="true" tabindex="-1"></a>           median_income_individual, median_household_income, </span>
<span id="cb259-116"><a href="#cb259-116" aria-hidden="true" tabindex="-1"></a>           snap_recipient_hh_prior12, non_citizen_pct, over_65_pct)</span>
<span id="cb259-117"><a href="#cb259-117" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb259-118"><a href="#cb259-118" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb259-119"><a href="#cb259-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(<span class="fu">paste0</span>(<span class="st">"snap_"</span>, year), census_wide, <span class="at">envir =</span> .GlobalEnv)</span>
<span id="cb259-120"><a href="#cb259-120" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb259-121"><a href="#cb259-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-122"><a href="#cb259-122" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2023</span>)</span>
<span id="cb259-123"><a href="#cb259-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-124"><a href="#cb259-124" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="at">.x =</span> years, <span class="at">.f =</span> get_snap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2011-2015 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2012-2016 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2013-2017 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2014-2018 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2015-2019 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2019-2023 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 3,220 × 17
   GEOID NAME                      year male_pct median_age white_pct family_pct
   &lt;chr&gt; &lt;chr&gt;                    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 01001 Autauga County, Alabama   2015    0.484       37.7     0.758      0.697
 2 01003 Baldwin County, Alabama   2015    0.488       42.2     0.831      0.678
 3 01005 Barbour County, Alabama   2015    0.538       38.8     0.462      0.657
 4 01007 Bibb County, Alabama      2015    0.534       38.9     0.745      0.754
 5 01009 Blount County, Alabama    2015    0.494       40.7     0.879      0.751
 6 01011 Bullock County, Alabama   2015    0.530       39.3     0.222      0.633
 7 01013 Butler County, Alabama    2015    0.467       40.5     0.533      0.654
 8 01015 Calhoun County, Alabama   2015    0.482       39.1     0.730      0.677
 9 01017 Chambers County, Alabama  2015    0.477       43       0.573      0.626
10 01019 Cherokee County, Alabama  2015    0.499       45.4     0.917      0.725
# ℹ 3,210 more rows
# ℹ 10 more variables: bachelor_or_higher_pct &lt;dbl&gt;, poverty_pct &lt;dbl&gt;,
#   disabled_pct &lt;dbl&gt;, snap_pct &lt;dbl&gt;, renter_pct &lt;dbl&gt;,
#   median_income_individual &lt;dbl&gt;, median_household_income &lt;dbl&gt;,
#   snap_recipient_hh_prior12 &lt;dbl&gt;, non_citizen_pct &lt;dbl&gt;, over_65_pct &lt;dbl&gt;

[[2]]
# A tibble: 3,220 × 17
   GEOID NAME                      year male_pct median_age white_pct family_pct
   &lt;chr&gt; &lt;chr&gt;                    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 01001 Autauga County, Alabama   2016    0.488       37.8     0.757      0.704
 2 01003 Baldwin County, Alabama   2016    0.488       42.3     0.832      0.668
 3 01005 Barbour County, Alabama   2016    0.535       38.7     0.459      0.654
 4 01007 Bibb County, Alabama      2016    0.535       40.2     0.748      0.748
 5 01009 Blount County, Alabama    2016    0.495       40.8     0.877      0.749
 6 01011 Bullock County, Alabama   2016    0.542       39.2     0.217      0.652
 7 01013 Butler County, Alabama    2016    0.470       40.6     0.528      0.670
 8 01015 Calhoun County, Alabama   2016    0.481       39.1     0.730      0.681
 9 01017 Chambers County, Alabama  2016    0.479       43.1     0.567      0.625
10 01019 Cherokee County, Alabama  2016    0.497       45.7     0.919      0.720
# ℹ 3,210 more rows
# ℹ 10 more variables: bachelor_or_higher_pct &lt;dbl&gt;, poverty_pct &lt;dbl&gt;,
#   disabled_pct &lt;dbl&gt;, snap_pct &lt;dbl&gt;, renter_pct &lt;dbl&gt;,
#   median_income_individual &lt;dbl&gt;, median_household_income &lt;dbl&gt;,
#   snap_recipient_hh_prior12 &lt;dbl&gt;, non_citizen_pct &lt;dbl&gt;, over_65_pct &lt;dbl&gt;

[[3]]
# A tibble: 3,220 × 17
   GEOID NAME                      year male_pct median_age white_pct family_pct
   &lt;chr&gt; &lt;chr&gt;                    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 01001 Autauga County, Alabama   2017    0.489       37.8     0.754      0.708
 2 01003 Baldwin County, Alabama   2017    0.489       42.6     0.831      0.657
 3 01005 Barbour County, Alabama   2017    0.533       39.7     0.457      0.657
 4 01007 Bibb County, Alabama      2017    0.543       39.8     0.746      0.767
 5 01009 Blount County, Alabama    2017    0.494       40.9     0.874      0.740
 6 01011 Bullock County, Alabama   2017    0.536       40.8     0.216      0.660
 7 01013 Butler County, Alabama    2017    0.468       40.7     0.522      0.648
 8 01015 Calhoun County, Alabama   2017    0.481       39.1     0.727      0.681
 9 01017 Chambers County, Alabama  2017    0.481       43       0.562      0.635
10 01019 Cherokee County, Alabama  2017    0.497       46.1     0.918      0.701
# ℹ 3,210 more rows
# ℹ 10 more variables: bachelor_or_higher_pct &lt;dbl&gt;, poverty_pct &lt;dbl&gt;,
#   disabled_pct &lt;dbl&gt;, snap_pct &lt;dbl&gt;, renter_pct &lt;dbl&gt;,
#   median_income_individual &lt;dbl&gt;, median_household_income &lt;dbl&gt;,
#   snap_recipient_hh_prior12 &lt;dbl&gt;, non_citizen_pct &lt;dbl&gt;, over_65_pct &lt;dbl&gt;

[[4]]
# A tibble: 3,220 × 17
   GEOID NAME                      year male_pct median_age white_pct family_pct
   &lt;chr&gt; &lt;chr&gt;                    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 01001 Autauga County, Alabama   2018    0.487       37.8     0.750      0.718
 2 01003 Baldwin County, Alabama   2018    0.486       42.8     0.830      0.653
 3 01005 Barbour County, Alabama   2018    0.531       39.9     0.461      0.656
 4 01007 Bibb County, Alabama      2018    0.539       39.9     0.746      0.723
 5 01009 Blount County, Alabama    2018    0.493       40.8     0.871      0.733
 6 01011 Bullock County, Alabama   2018    0.547       39.6     0.215      0.687
 7 01013 Butler County, Alabama    2018    0.468       40.7     0.519      0.660
 8 01015 Calhoun County, Alabama   2018    0.481       39.7     0.725      0.685
 9 01017 Chambers County, Alabama  2018    0.481       43       0.558      0.641
10 01019 Cherokee County, Alabama  2018    0.496       45.9     0.918      0.691
# ℹ 3,210 more rows
# ℹ 10 more variables: bachelor_or_higher_pct &lt;dbl&gt;, poverty_pct &lt;dbl&gt;,
#   disabled_pct &lt;dbl&gt;, snap_pct &lt;dbl&gt;, renter_pct &lt;dbl&gt;,
#   median_income_individual &lt;dbl&gt;, median_household_income &lt;dbl&gt;,
#   snap_recipient_hh_prior12 &lt;dbl&gt;, non_citizen_pct &lt;dbl&gt;, over_65_pct &lt;dbl&gt;

[[5]]
# A tibble: 3,220 × 17
   GEOID NAME                      year male_pct median_age white_pct family_pct
   &lt;chr&gt; &lt;chr&gt;                    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 01001 Autauga County, Alabama   2019    0.486       38.2     0.746      0.705
 2 01003 Baldwin County, Alabama   2019    0.486       43       0.831      0.661
 3 01005 Barbour County, Alabama   2019    0.529       40.4     0.458      0.662
 4 01007 Bibb County, Alabama      2019    0.540       40.9     0.745      0.695
 5 01009 Blount County, Alabama    2019    0.494       40.7     0.869      0.713
 6 01011 Bullock County, Alabama   2019    0.544       40.2     0.214      0.711
 7 01013 Butler County, Alabama    2019    0.458       40.8     0.516      0.666
 8 01015 Calhoun County, Alabama   2019    0.481       39.6     0.721      0.672
 9 01017 Chambers County, Alabama  2019    0.478       42       0.555      0.636
10 01019 Cherokee County, Alabama  2019    0.493       46.5     0.917      0.681
# ℹ 3,210 more rows
# ℹ 10 more variables: bachelor_or_higher_pct &lt;dbl&gt;, poverty_pct &lt;dbl&gt;,
#   disabled_pct &lt;dbl&gt;, snap_pct &lt;dbl&gt;, renter_pct &lt;dbl&gt;,
#   median_income_individual &lt;dbl&gt;, median_household_income &lt;dbl&gt;,
#   snap_recipient_hh_prior12 &lt;dbl&gt;, non_citizen_pct &lt;dbl&gt;, over_65_pct &lt;dbl&gt;

[[6]]
# A tibble: 3,222 × 17
   GEOID NAME                      year male_pct median_age white_pct family_pct
   &lt;chr&gt; &lt;chr&gt;                    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 01001 Autauga County, Alabama   2023    0.484       39.2     0.717      0.696
 2 01003 Baldwin County, Alabama   2023    0.489       43.7     0.814      0.682
 3 01005 Barbour County, Alabama   2023    0.521       40.7     0.437      0.660
 4 01007 Bibb County, Alabama      2023    0.534       41.3     0.737      0.695
 5 01009 Blount County, Alabama    2023    0.505       40.9     0.850      0.711
 6 01011 Bullock County, Alabama   2023    0.547       40.4     0.211      0.613
 7 01013 Butler County, Alabama    2023    0.460       42.2     0.507      0.634
 8 01015 Calhoun County, Alabama   2023    0.483       39       0.698      0.621
 9 01017 Chambers County, Alabama  2023    0.467       41.5     0.539      0.667
10 01019 Cherokee County, Alabama  2023    0.493       47.4     0.907      0.653
# ℹ 3,212 more rows
# ℹ 10 more variables: bachelor_or_higher_pct &lt;dbl&gt;, poverty_pct &lt;dbl&gt;,
#   disabled_pct &lt;dbl&gt;, snap_pct &lt;dbl&gt;, renter_pct &lt;dbl&gt;,
#   median_income_individual &lt;dbl&gt;, median_household_income &lt;dbl&gt;,
#   snap_recipient_hh_prior12 &lt;dbl&gt;, non_citizen_pct &lt;dbl&gt;, over_65_pct &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a>combined_census <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(snap_2015, snap_2016, snap_2017, snap_2018, </span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true" tabindex="-1"></a>                             snap_2019, snap_2023) <span class="sc">|&gt;</span></span>
<span id="cb267-3"><a href="#cb267-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(GEOID)</span>
<span id="cb267-4"><a href="#cb267-4" aria-hidden="true" tabindex="-1"></a><span class="do">#######</span></span>
<span id="cb267-5"><a href="#cb267-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-6"><a href="#cb267-6" aria-hidden="true" tabindex="-1"></a><span class="co">#USDA Rural-Urban Data</span></span>
<span id="cb267-7"><a href="#cb267-7" aria-hidden="true" tabindex="-1"></a><span class="do">#######</span></span>
<span id="cb267-8"><a href="#cb267-8" aria-hidden="true" tabindex="-1"></a>ruralurbancodes2013 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/ruralurbancodes2013.xls"</span>)</span>
<span id="cb267-9"><a href="#cb267-9" aria-hidden="true" tabindex="-1"></a>ruralurbancodes2023 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/Ruralurbancontinuumcodes2023.xlsx"</span>)</span>
<span id="cb267-10"><a href="#cb267-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-11"><a href="#cb267-11" aria-hidden="true" tabindex="-1"></a>ruralurbancodes2013 <span class="ot">&lt;-</span> ruralurbancodes2013 <span class="sc">|&gt;</span></span>
<span id="cb267-12"><a href="#cb267-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">GEOID =</span> FIPS)</span>
<span id="cb267-13"><a href="#cb267-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-14"><a href="#cb267-14" aria-hidden="true" tabindex="-1"></a>ruralurbancodes2023 <span class="ot">&lt;-</span> ruralurbancodes2023 <span class="sc">|&gt;</span></span>
<span id="cb267-15"><a href="#cb267-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">GEOID =</span> FIPS)</span>
<span id="cb267-16"><a href="#cb267-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-17"><a href="#cb267-17" aria-hidden="true" tabindex="-1"></a>census_urban_rural <span class="ot">&lt;-</span> combined_census <span class="sc">|&gt;</span></span>
<span id="cb267-18"><a href="#cb267-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ruralurbancodes2013 <span class="sc">|&gt;</span></span>
<span id="cb267-19"><a href="#cb267-19" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(GEOID, RUCC_2013), <span class="at">by =</span> <span class="st">"GEOID"</span>) <span class="sc">|&gt;</span></span>
<span id="cb267-20"><a href="#cb267-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ruralurbancodes2023 <span class="sc">|&gt;</span></span>
<span id="cb267-21"><a href="#cb267-21" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(GEOID, RUCC_2023), <span class="at">by =</span> <span class="st">"GEOID"</span>) <span class="sc">|&gt;</span></span>
<span id="cb267-22"><a href="#cb267-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rural_urban_score =</span> <span class="fu">case_when</span>(</span>
<span id="cb267-23"><a href="#cb267-23" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">==</span> <span class="dv">2023</span> <span class="sc">~</span> RUCC_2023,</span>
<span id="cb267-24"><a href="#cb267-24" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> RUCC_2013)) <span class="sc">|&gt;</span></span>
<span id="cb267-25"><a href="#cb267-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>RUCC_2013, <span class="sc">-</span>RUCC_2023)</span>
<span id="cb267-26"><a href="#cb267-26" aria-hidden="true" tabindex="-1"></a><span class="do">######</span></span>
<span id="cb267-27"><a href="#cb267-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-28"><a href="#cb267-28" aria-hidden="true" tabindex="-1"></a><span class="co">#Univ Kentucky Welfare Data</span></span>
<span id="cb267-29"><a href="#cb267-29" aria-hidden="true" tabindex="-1"></a><span class="do">######</span></span>
<span id="cb267-30"><a href="#cb267-30" aria-hidden="true" tabindex="-1"></a>ky_welfare <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/UKCPR_National_Welfare_Data_1980_2023.xlsx"</span>, </span>
<span id="cb267-31"><a href="#cb267-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">sheet =</span> <span class="st">"Data"</span>, </span>
<span id="cb267-32"><a href="#cb267-32" aria-hidden="true" tabindex="-1"></a>                         <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"text"</span>, </span>
<span id="cb267-33"><a href="#cb267-33" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-34"><a href="#cb267-34" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-35"><a href="#cb267-35" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-36"><a href="#cb267-36" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-37"><a href="#cb267-37" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-38"><a href="#cb267-38" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-39"><a href="#cb267-39" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-40"><a href="#cb267-40" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-41"><a href="#cb267-41" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-42"><a href="#cb267-42" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-43"><a href="#cb267-43" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-44"><a href="#cb267-44" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-45"><a href="#cb267-45" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"text"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-46"><a href="#cb267-46" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-47"><a href="#cb267-47" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-48"><a href="#cb267-48" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-49"><a href="#cb267-49" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-50"><a href="#cb267-50" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-51"><a href="#cb267-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-52"><a href="#cb267-52" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-53"><a href="#cb267-53" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-54"><a href="#cb267-54" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-55"><a href="#cb267-55" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, </span>
<span id="cb267-56"><a href="#cb267-56" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"numeric"</span>, <span class="st">"numeric"</span>, <span class="st">"numeric"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb267-57"><a href="#cb267-57" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb267-58"><a href="#cb267-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-59"><a href="#cb267-59" aria-hidden="true" tabindex="-1"></a>ky_welfare <span class="ot">&lt;-</span> ky_welfare <span class="sc">|&gt;</span></span>
<span id="cb267-60"><a href="#cb267-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2015</span>,<span class="dv">2016</span>,<span class="dv">2017</span>,<span class="dv">2018</span>,<span class="dv">2019</span>,<span class="dv">2023</span>)) <span class="sc">|&gt;</span></span>
<span id="cb267-61"><a href="#cb267-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_fips =</span> <span class="fu">str_pad</span>(state_fips, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb267-62"><a href="#cb267-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_fips, year, unemployment_rate, marginally_food_insecure, food_insecure,</span>
<span id="cb267-63"><a href="#cb267-63" aria-hidden="true" tabindex="-1"></a>         very_low_food_secure, gross_state_product, governor_is_democrat_1_yes,</span>
<span id="cb267-64"><a href="#cb267-64" aria-hidden="true" tabindex="-1"></a>         fraction_of_state_house_that_is_democrat, fraction_of_state_senate_that_is_democrat,</span>
<span id="cb267-65"><a href="#cb267-65" aria-hidden="true" tabindex="-1"></a>         state_minimum_wage)</span>
<span id="cb267-66"><a href="#cb267-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-67"><a href="#cb267-67" aria-hidden="true" tabindex="-1"></a>census_urban_rural <span class="ot">&lt;-</span> census_urban_rural <span class="sc">|&gt;</span></span>
<span id="cb267-68"><a href="#cb267-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_fips =</span> <span class="fu">substr</span>(GEOID, <span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb267-69"><a href="#cb267-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-70"><a href="#cb267-70" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span>  census_urban_rural <span class="sc">|&gt;</span></span>
<span id="cb267-71"><a href="#cb267-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ky_welfare, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span>, <span class="st">"year"</span>)) </span>
<span id="cb267-72"><a href="#cb267-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-73"><a href="#cb267-73" aria-hidden="true" tabindex="-1"></a><span class="co">#Last cleaning details and Exploration</span></span>
<span id="cb267-74"><a href="#cb267-74" aria-hidden="true" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb267-75"><a href="#cb267-75" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-76"><a href="#cb267-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(governor_is_democrat_1_yes))) <span class="co">#All DC and PR</span></span>
<span id="cb267-77"><a href="#cb267-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-78"><a href="#cb267-78" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-79"><a href="#cb267-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state_fips <span class="sc">!=</span> <span class="dv">72</span>) <span class="co">#Filtering out PR</span></span>
<span id="cb267-80"><a href="#cb267-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-81"><a href="#cb267-81" aria-hidden="true" tabindex="-1"></a><span class="co">#Manually imputing 1 to reflect DC's Democratic mayor each year</span></span>
<span id="cb267-82"><a href="#cb267-82" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-83"><a href="#cb267-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">governor_is_democrat_1_yes =</span> <span class="fu">ifelse</span>(GEOID <span class="sc">==</span> <span class="st">"11001"</span>, <span class="dv">1</span>, governor_is_democrat_1_yes))</span>
<span id="cb267-84"><a href="#cb267-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-85"><a href="#cb267-85" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-86"><a href="#cb267-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction_of_state_house_that_is_democrat =</span> <span class="fu">ifelse</span>(</span>
<span id="cb267-87"><a href="#cb267-87" aria-hidden="true" tabindex="-1"></a>    GEOID <span class="sc">==</span> <span class="st">"11001"</span>, <span class="dv">1</span>, fraction_of_state_house_that_is_democrat))</span>
<span id="cb267-88"><a href="#cb267-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-89"><a href="#cb267-89" aria-hidden="true" tabindex="-1"></a><span class="co">#Manually imputing Nebraska's unicameral makeup to both state house and senate pct</span></span>
<span id="cb267-90"><a href="#cb267-90" aria-hidden="true" tabindex="-1"></a><span class="co">#Though technically nonpartisan, data on party endorsements of candidates is used</span></span>
<span id="cb267-91"><a href="#cb267-91" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-92"><a href="#cb267-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction_of_state_house_that_is_democrat =</span> <span class="fu">ifelse</span>(</span>
<span id="cb267-93"><a href="#cb267-93" aria-hidden="true" tabindex="-1"></a>    state_fips <span class="sc">==</span> <span class="st">"31"</span> <span class="sc">&amp;</span> year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2016</span>), <span class="dv">12</span><span class="sc">/</span><span class="dv">49</span>, </span>
<span id="cb267-94"><a href="#cb267-94" aria-hidden="true" tabindex="-1"></a>    fraction_of_state_house_that_is_democrat))</span>
<span id="cb267-95"><a href="#cb267-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-96"><a href="#cb267-96" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-97"><a href="#cb267-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction_of_state_senate_that_is_democrat =</span> <span class="fu">ifelse</span>(</span>
<span id="cb267-98"><a href="#cb267-98" aria-hidden="true" tabindex="-1"></a>    state_fips <span class="sc">==</span> <span class="st">"31"</span> <span class="sc">&amp;</span> year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2016</span>), <span class="dv">12</span><span class="sc">/</span><span class="dv">49</span>, </span>
<span id="cb267-99"><a href="#cb267-99" aria-hidden="true" tabindex="-1"></a>    fraction_of_state_senate_that_is_democrat))</span>
<span id="cb267-100"><a href="#cb267-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-101"><a href="#cb267-101" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-102"><a href="#cb267-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction_of_state_house_that_is_democrat =</span> <span class="fu">ifelse</span>(</span>
<span id="cb267-103"><a href="#cb267-103" aria-hidden="true" tabindex="-1"></a>    state_fips <span class="sc">==</span> <span class="st">"31"</span> <span class="sc">&amp;</span> year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>), <span class="dv">15</span><span class="sc">/</span><span class="dv">49</span>, </span>
<span id="cb267-104"><a href="#cb267-104" aria-hidden="true" tabindex="-1"></a>    fraction_of_state_house_that_is_democrat))</span>
<span id="cb267-105"><a href="#cb267-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-106"><a href="#cb267-106" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-107"><a href="#cb267-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction_of_state_senate_that_is_democrat =</span> <span class="fu">ifelse</span>(</span>
<span id="cb267-108"><a href="#cb267-108" aria-hidden="true" tabindex="-1"></a>    state_fips <span class="sc">==</span> <span class="st">"31"</span> <span class="sc">&amp;</span> year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>), <span class="dv">15</span><span class="sc">/</span><span class="dv">49</span>, </span>
<span id="cb267-109"><a href="#cb267-109" aria-hidden="true" tabindex="-1"></a>    fraction_of_state_senate_that_is_democrat))</span>
<span id="cb267-110"><a href="#cb267-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-111"><a href="#cb267-111" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-112"><a href="#cb267-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction_of_state_house_that_is_democrat =</span> <span class="fu">ifelse</span>(</span>
<span id="cb267-113"><a href="#cb267-113" aria-hidden="true" tabindex="-1"></a>    state_fips <span class="sc">==</span> <span class="st">"31"</span> <span class="sc">&amp;</span> year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2023</span>), <span class="dv">17</span><span class="sc">/</span><span class="dv">49</span>, </span>
<span id="cb267-114"><a href="#cb267-114" aria-hidden="true" tabindex="-1"></a>    fraction_of_state_house_that_is_democrat))</span>
<span id="cb267-115"><a href="#cb267-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-116"><a href="#cb267-116" aria-hidden="true" tabindex="-1"></a>demographic_combined <span class="ot">&lt;-</span> demographic_combined <span class="sc">|&gt;</span></span>
<span id="cb267-117"><a href="#cb267-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fraction_of_state_senate_that_is_democrat =</span> <span class="fu">ifelse</span>(</span>
<span id="cb267-118"><a href="#cb267-118" aria-hidden="true" tabindex="-1"></a>    state_fips <span class="sc">==</span> <span class="st">"31"</span> <span class="sc">&amp;</span> year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2023</span>), <span class="dv">17</span><span class="sc">/</span><span class="dv">49</span>, </span>
<span id="cb267-119"><a href="#cb267-119" aria-hidden="true" tabindex="-1"></a>    fraction_of_state_senate_that_is_democrat))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="snap-policy-predictors" class="level2">
<h2 class="anchored" data-anchor-id="snap-policy-predictors">SNAP Policy Predictors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a>poldb <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"C:/Users/Caroline/Desktop/MIDP SEMESTER IV/Introduction to Data Science R/SNAP_modeling/data/SNAPPolicyDatabase.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"SNAP Policy Database"</span>)</span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-5"><a href="#cb268-5" aria-hidden="true" tabindex="-1"></a>abawd_waivers <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"C:/Users/Caroline/Desktop/MIDP SEMESTER IV/Introduction to Data Science R/SNAP_modeling/data/SNAPPolicyDatabase.xlsx"</span>, </span>
<span id="cb268-6"><a href="#cb268-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">sheet =</span> <span class="st">"ABAWD Waivers"</span>)</span>
<span id="cb268-7"><a href="#cb268-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-8"><a href="#cb268-8" aria-hidden="true" tabindex="-1"></a>poldb_2023 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"C:/Users/Caroline/Desktop/MIDP SEMESTER IV/Introduction to Data Science R/SNAP_modeling/data/SNAPPolicyDatabase.xlsx"</span>, </span>
<span id="cb268-9"><a href="#cb268-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sheet =</span> <span class="st">"2023 Data"</span>)</span>
<span id="cb268-10"><a href="#cb268-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-11"><a href="#cb268-11" aria-hidden="true" tabindex="-1"></a>mode <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb268-12"><a href="#cb268-12" aria-hidden="true" tabindex="-1"></a>  u <span class="ot">&lt;-</span> <span class="fu">unique</span>(x)</span>
<span id="cb268-13"><a href="#cb268-13" aria-hidden="true" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> <span class="fu">tabulate</span>(<span class="fu">match</span>(x, u))</span>
<span id="cb268-14"><a href="#cb268-14" aria-hidden="true" tabindex="-1"></a>  u[tab <span class="sc">==</span> <span class="fu">max</span>(tab)]</span>
<span id="cb268-15"><a href="#cb268-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb268-16"><a href="#cb268-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-17"><a href="#cb268-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-18"><a href="#cb268-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-19"><a href="#cb268-19" aria-hidden="true" tabindex="-1"></a>combined_poldb <span class="ot">&lt;-</span> poldb <span class="sc">|&gt;</span></span>
<span id="cb268-20"><a href="#cb268-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(<span class="fu">str_sub</span>(<span class="fu">as.character</span>(yearmonth), <span class="dv">1</span>, <span class="dv">4</span>))) <span class="sc">|&gt;</span></span>
<span id="cb268-21"><a href="#cb268-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state_fips) <span class="sc">|&gt;</span></span>
<span id="cb268-22"><a href="#cb268-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">bbce =</span> <span class="fu">mode</span>(bbce),</span>
<span id="cb268-23"><a href="#cb268-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">bbce_asset =</span> <span class="fu">mode</span>(bbce_asset),</span>
<span id="cb268-24"><a href="#cb268-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">bbce_inclmt =</span> <span class="fu">mode</span>(bbce_inclmt)) <span class="sc">|&gt;</span></span>
<span id="cb268-25"><a href="#cb268-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(abawd_waivers, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span>, <span class="st">"year"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb268-26"><a href="#cb268-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(poldb_2023) <span class="sc">|&gt;</span></span>
<span id="cb268-27"><a href="#cb268-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;</span> <span class="dv">2014</span>,</span>
<span id="cb268-28"><a href="#cb268-28" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">!=</span> <span class="dv">2020</span>) <span class="sc">|&gt;</span></span>
<span id="cb268-29"><a href="#cb268-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_fips =</span> <span class="fu">as.character</span>(state_fips),</span>
<span id="cb268-30"><a href="#cb268-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_fips =</span> <span class="fu">case_when</span>(</span>
<span id="cb268-31"><a href="#cb268-31" aria-hidden="true" tabindex="-1"></a>           state_fips <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">~</span> <span class="st">"01"</span>,</span>
<span id="cb268-32"><a href="#cb268-32" aria-hidden="true" tabindex="-1"></a>           state_fips <span class="sc">==</span> <span class="st">"2"</span> <span class="sc">~</span> <span class="st">"02"</span>,</span>
<span id="cb268-33"><a href="#cb268-33" aria-hidden="true" tabindex="-1"></a>           state_fips <span class="sc">==</span> <span class="st">"4"</span> <span class="sc">~</span> <span class="st">"04"</span>,</span>
<span id="cb268-34"><a href="#cb268-34" aria-hidden="true" tabindex="-1"></a>           state_fips <span class="sc">==</span> <span class="st">"5"</span> <span class="sc">~</span> <span class="st">"05"</span>,</span>
<span id="cb268-35"><a href="#cb268-35" aria-hidden="true" tabindex="-1"></a>           state_fips <span class="sc">==</span> <span class="st">"6"</span> <span class="sc">~</span> <span class="st">"06"</span>,</span>
<span id="cb268-36"><a href="#cb268-36" aria-hidden="true" tabindex="-1"></a>           state_fips <span class="sc">==</span> <span class="st">"8"</span> <span class="sc">~</span> <span class="st">"08"</span>,</span>
<span id="cb268-37"><a href="#cb268-37" aria-hidden="true" tabindex="-1"></a>           state_fips <span class="sc">==</span> <span class="st">"9"</span> <span class="sc">~</span> <span class="st">"09"</span>,</span>
<span id="cb268-38"><a href="#cb268-38" aria-hidden="true" tabindex="-1"></a>           <span class="cn">TRUE</span> <span class="sc">~</span> state_fips</span>
<span id="cb268-39"><a href="#cb268-39" aria-hidden="true" tabindex="-1"></a>         ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year', 'state_fips'. You can override
using the `.groups` argument.</code></pre>
</div>
</div>
</section>
<section id="merging-datasets" class="level2">
<h2 class="anchored" data-anchor-id="merging-datasets">Merging datasets</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>snap_2model <span class="ot">&lt;-</span> snap_participation <span class="sc">|&gt;</span></span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(demographic_combined, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID"</span>, <span class="st">"year"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb271-3"><a href="#cb271-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(combined_poldb, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span>, <span class="st">"year"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb271-4"><a href="#cb271-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb271-5"><a href="#cb271-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(snap_participation_rate <span class="sc">&lt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb271-6"><a href="#cb271-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>median_income_individual)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in left_join(left_join(snap_participation, demographic_combined, : Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 12419 of `x` matches multiple rows in `y`.
ℹ Row 1 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a>county_observations <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GEOID) <span class="sc">|&gt;</span></span>
<span id="cb273-3"><a href="#cb273-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_obs =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb273-4"><a href="#cb273-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(num_obs<span class="sc">&lt;</span><span class="dv">6</span>)</span>
<span id="cb273-5"><a href="#cb273-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-6"><a href="#cb273-6" aria-hidden="true" tabindex="-1"></a>snap_2model <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb273-7"><a href="#cb273-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(county_observations, <span class="at">by =</span> <span class="st">"GEOID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="split-up-testing-and-training" class="level2">
<h2 class="anchored" data-anchor-id="split-up-testing-and-training">Split up testing and training</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>snap_test <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">2023</span>)</span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a>snap_train <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">!=</span><span class="dv">2023</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>We explore the data to understand patterns and trends in Supplemental Nutrition Assistance Program (SNAP) participation across U.S. counties. The combined dataset covers administrative records from 2015 to 2019 and 2023, integrating county-level SNAP household participation data with demographic and socioeconomic indicators, including variables from the American Community Survey (ACS). This exploratory analysis examines temporal and geographic variation in participation, evaluates data quality and distributions, and identifies potential associations between SNAP participation rates and key covariates such as poverty levels, unemployment rates, and household characteristics.</p>
<section id="national-average-snap-participation-rate-by-year-to-2019" class="level3">
<h3 class="anchored" data-anchor-id="national-average-snap-participation-rate-by-year-to-2019">National Average SNAP Participation Rate by Year to 2019</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a>national_avg <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb275-4"><a href="#cb275-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">national_avg_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb275-5"><a href="#cb275-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-6"><a href="#cb275-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(national_avg, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> national_avg_rate)) <span class="sc">+</span></span>
<span id="cb275-7"><a href="#cb275-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>, <span class="at">color =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb275-8"><a href="#cb275-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb275-9"><a href="#cb275-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb275-10"><a href="#cb275-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"National Average SNAP Participation Rate by Year (Up to 2019)"</span>,</span>
<span id="cb275-11"><a href="#cb275-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Average Participation Rate"</span></span>
<span id="cb275-12"><a href="#cb275-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb275-13"><a href="#cb275-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The figure displays the national average SNAP participation rate across all counties from 2015 to 2019. The chart reveals a consistent downward trend in the average rate, beginning at approximately 18.6% in 2015 and declining to just above 16.2% by 2019. The decrease appears steady, with the most pronounced drop occurring between 2016 and 2017.</p>
</section>
<section id="county-level-map-of-snap-participation-rates" class="level3">
<h3 class="anchored" data-anchor-id="county-level-map-of-snap-participation-rates">2019 county-level map of SNAP participation rates</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true" tabindex="-1"></a>snap_map <span class="sc">|&gt;</span></span>
<span id="cb277-4"><a href="#cb277-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb277-5"><a href="#cb277-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb277-6"><a href="#cb277-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> snap_participation_rate), <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb277-7"><a href="#cb277-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#cfe8f3"</span>, <span class="at">high =</span> <span class="st">"#062635"</span>, <span class="at">na.value =</span> <span class="st">"grey90"</span>) <span class="sc">+</span></span>
<span id="cb277-8"><a href="#cb277-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"SNAP Participation Rate by County (2019)"</span>,</span>
<span id="cb277-9"><a href="#cb277-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Participation Rate"</span>) <span class="sc">+</span></span>
<span id="cb277-10"><a href="#cb277-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb277-11"><a href="#cb277-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The map shows county-level SNAP participation rates for 2019. Darker areas indicate higher rates, revealing clear geographic variation. Higher participation is concentrated in parts of the South and Southwest, while lower rates appear in much of the Midwest and Mountain West. This highlights regional disparities in program uptake.</p>
</section>
<section id="extreme-highest-and-lowest-participation-states-and-counties-per-year" class="level3">
<h3 class="anchored" data-anchor-id="extreme-highest-and-lowest-participation-states-and-counties-per-year">Extreme (highest and lowest participation) states and counties per year</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a>snap_filtered <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;=</span> <span class="dv">2019</span>)</span>
<span id="cb278-3"><a href="#cb278-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-4"><a href="#cb278-4" aria-hidden="true" tabindex="-1"></a>state_extremes <span class="ot">&lt;-</span> snap_filtered <span class="sc">|&gt;</span></span>
<span id="cb278-5"><a href="#cb278-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state_name) <span class="sc">|&gt;</span></span>
<span id="cb278-6"><a href="#cb278-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">state_avg =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb278-7"><a href="#cb278-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb278-8"><a href="#cb278-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb278-9"><a href="#cb278-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">highest_state =</span> state_name[<span class="fu">which.max</span>(state_avg)],</span>
<span id="cb278-10"><a href="#cb278-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">highest_state_rate =</span> <span class="fu">max</span>(state_avg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb278-11"><a href="#cb278-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">lowest_state =</span> state_name[<span class="fu">which.min</span>(state_avg)],</span>
<span id="cb278-12"><a href="#cb278-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">lowest_state_rate =</span> <span class="fu">min</span>(state_avg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb278-13"><a href="#cb278-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb278-14"><a href="#cb278-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-15"><a href="#cb278-15" aria-hidden="true" tabindex="-1"></a>county_extremes <span class="ot">&lt;-</span> snap_filtered <span class="sc">|&gt;</span></span>
<span id="cb278-16"><a href="#cb278-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, NAME) <span class="sc">|&gt;</span></span>
<span id="cb278-17"><a href="#cb278-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">county_avg =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb278-18"><a href="#cb278-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb278-19"><a href="#cb278-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb278-20"><a href="#cb278-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">highest_county =</span> NAME[<span class="fu">which.max</span>(county_avg)],</span>
<span id="cb278-21"><a href="#cb278-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">highest_county_rate =</span> <span class="fu">max</span>(county_avg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb278-22"><a href="#cb278-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">lowest_county =</span> NAME[<span class="fu">which.min</span>(county_avg)],</span>
<span id="cb278-23"><a href="#cb278-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">lowest_county_rate =</span> <span class="fu">min</span>(county_avg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb278-24"><a href="#cb278-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb278-25"><a href="#cb278-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-26"><a href="#cb278-26" aria-hidden="true" tabindex="-1"></a>combined_extremes <span class="ot">&lt;-</span> <span class="fu">left_join</span>(state_extremes, county_extremes, <span class="at">by =</span> <span class="st">"year"</span>)</span>
<span id="cb278-27"><a href="#cb278-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-28"><a href="#cb278-28" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(combined_extremes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 9
   year highest_state highest_state_rate lowest_state lowest_state_rate
  &lt;dbl&gt; &lt;chr&gt;                      &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt;
1  2015 Mississippi                0.337 Wyoming                 0.0617
2  2016 Mississippi                0.288 Wyoming                 0.0621
3  2017 New Mexico                 0.301 Wyoming                 0.0542
4  2018 New Mexico                 0.305 Wyoming                 0.0485
5  2019 New Mexico                 0.263 Wyoming                 0.0392
# ℹ 4 more variables: highest_county &lt;chr&gt;, highest_county_rate &lt;dbl&gt;,
#   lowest_county &lt;chr&gt;, lowest_county_rate &lt;dbl&gt;</code></pre>
</div>
</div>
<p>At the county level, SNAP participation rates varied widely. Owsley County, Kentucky and Perry County, Alabama repeatedly appeared among those with the highest rates, exceeding 70% in some years. In contrast, counties like Ellis County, Oklahoma, Alexander County, Illinois, and Brooke County, West Virginia recorded the lowest rates, with values of 0%. These results highlight pronounced local disparities in program participation, even within states.</p>
</section>
<section id="summary-of-counties-with-0-participation-rate" class="level3">
<h3 class="anchored" data-anchor-id="summary-of-counties-with-0-participation-rate">Summary of counties with 0% participation rate</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>zero_participation_list <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( year <span class="sc">&lt;=</span> <span class="dv">2019</span>, snap_participation_rate <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, NAME, state_name, snap_participation_rate) <span class="sc">|&gt;</span></span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, state_name, NAME)</span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb280-6"><a href="#cb280-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(zero_participation_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 × 4
    year NAME                          state_name snap_participation_rate
   &lt;dbl&gt; &lt;chr&gt;                         &lt;chr&gt;                        &lt;dbl&gt;
 1  2015 Prairie County, Montana       Montana                          0
 2  2015 Harding County, New Mexico    New Mexico                       0
 3  2015 Los Alamos County, New Mexico New Mexico                       0
 4  2015 Mora County, New Mexico       New Mexico                       0
 5  2015 Union County, New Mexico      New Mexico                       0
 6  2015 Ellis County, Oklahoma        Oklahoma                         0
 7  2016 Prairie County, Montana       Montana                          0
 8  2016 Harding County, New Mexico    New Mexico                       0
 9  2016 Los Alamos County, New Mexico New Mexico                       0
10  2016 Mora County, New Mexico       New Mexico                       0
# ℹ 50 more rows</code></pre>
</div>
</div>
<p>Several counties across multiple states reported a SNAP participation rate of zero in specific years between 2015 and 2019. These include repeated cases in Illinois (e.g., Alexander, Carroll, Clinton), Oklahoma (e.g., Ellis, Love, Cimarron), Montana (Prairie County), and others.</p>
</section>
<section id="summarize-counties-with-participation-rate-50" class="level3">
<h3 class="anchored" data-anchor-id="summarize-counties-with-participation-rate-50">Summarize counties with participation rate &gt; 50%</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>over_50_summary <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(snap_participation_rate), year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb282-3"><a href="#cb282-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb282-4"><a href="#cb282-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb282-5"><a href="#cb282-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_counties =</span> <span class="fu">n</span>(),</span>
<span id="cb282-6"><a href="#cb282-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">counties_over_50 =</span> <span class="fu">sum</span>(snap_participation_rate <span class="sc">&gt;</span> <span class="fl">0.50</span>),</span>
<span id="cb282-7"><a href="#cb282-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_over_50 =</span> <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> counties_over_50 <span class="sc">/</span> total_counties, <span class="dv">2</span>),</span>
<span id="cb282-8"><a href="#cb282-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb282-9"><a href="#cb282-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb282-10"><a href="#cb282-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-11"><a href="#cb282-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(over_50_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
   year total_counties counties_over_50 percent_over_50
  &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;           &lt;dbl&gt;
1  2015           2287               36            1.57
2  2016           2344               30            1.28
3  2017           2344               26            1.11
4  2018           2399               16            0.67
5  2019           2426               14            0.58</code></pre>
</div>
</div>
<p>From 2015 to 2019, the share of counties with SNAP participation rates above 50% declined steadily from 1.53% (35 counties) to 0.54% (13 counties), indicating a shrinking number of high-participation counties over time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define Census South states</span></span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true" tabindex="-1"></a>south_states <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb284-5"><a href="#cb284-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Delaware"</span>, <span class="st">"District of Columbia"</span>, <span class="st">"Florida"</span>, <span class="st">"Georgia"</span>, <span class="st">"Maryland"</span>,</span>
<span id="cb284-6"><a href="#cb284-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"North Carolina"</span>, <span class="st">"South Carolina"</span>, <span class="st">"Virginia"</span>, <span class="st">"West Virginia"</span>,</span>
<span id="cb284-7"><a href="#cb284-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Alabama"</span>, <span class="st">"Kentucky"</span>, <span class="st">"Mississippi"</span>, <span class="st">"Tennessee"</span>, <span class="st">"Arkansas"</span>,</span>
<span id="cb284-8"><a href="#cb284-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Louisiana"</span>, <span class="st">"Oklahoma"</span>, <span class="st">"Texas"</span></span>
<span id="cb284-9"><a href="#cb284-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb284-10"><a href="#cb284-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-11"><a href="#cb284-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize for Census South region (2015–2019)</span></span>
<span id="cb284-12"><a href="#cb284-12" aria-hidden="true" tabindex="-1"></a>south_summary <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb284-13"><a href="#cb284-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state_name <span class="sc">%in%</span> south_states, year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb284-14"><a href="#cb284-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb284-15"><a href="#cb284-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb284-16"><a href="#cb284-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_snap_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb284-17"><a href="#cb284-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_median_income =</span> <span class="fu">mean</span>(median_household_income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb284-18"><a href="#cb284-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_poverty_rate =</span> <span class="fu">mean</span>(poverty_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb284-19"><a href="#cb284-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_unemployment_rate =</span> <span class="fu">mean</span>(unemployment_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb284-20"><a href="#cb284-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_counties =</span> <span class="fu">n</span>(),</span>
<span id="cb284-21"><a href="#cb284-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb284-22"><a href="#cb284-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb284-23"><a href="#cb284-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-24"><a href="#cb284-24" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(south_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
   year avg_snap_rate avg_median_income avg_poverty_rate avg_unemployment_rate
  &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;                 &lt;dbl&gt;
1  2015         0.224            44410.            0.191                  5.32
2  2016         0.219            45102.            0.189                  5.01
3  2017         0.208            46774.            0.184                  4.42
4  2018         0.202            48260.            0.180                  3.98
5  2019         0.189            49595.            0.179                  3.82
# ℹ 1 more variable: total_counties &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape to long format for plotting</span></span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a>south_long <span class="ot">&lt;-</span> south_summary <span class="sc">|&gt;</span></span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb286-4"><a href="#cb286-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(avg_snap_rate, avg_median_income, avg_poverty_rate, avg_unemployment_rate),</span>
<span id="cb286-5"><a href="#cb286-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb286-6"><a href="#cb286-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb286-7"><a href="#cb286-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb286-8"><a href="#cb286-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-9"><a href="#cb286-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a faceted line graph</span></span>
<span id="cb286-10"><a href="#cb286-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(south_long, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb286-11"><a href="#cb286-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb286-12"><a href="#cb286-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb286-13"><a href="#cb286-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb286-14"><a href="#cb286-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb286-15"><a href="#cb286-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Census South Trends (2015–2019)"</span>,</span>
<span id="cb286-16"><a href="#cb286-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb286-17"><a href="#cb286-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span></span>
<span id="cb286-18"><a href="#cb286-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb286-19"><a href="#cb286-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb287-3"><a href="#cb287-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb287-4"><a href="#cb287-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-5"><a href="#cb287-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Define South states (already defined earlier)</span></span>
<span id="cb287-6"><a href="#cb287-6" aria-hidden="true" tabindex="-1"></a>south_states <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb287-7"><a href="#cb287-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Delaware"</span>, <span class="st">"District of Columbia"</span>, <span class="st">"Florida"</span>, <span class="st">"Georgia"</span>, <span class="st">"Maryland"</span>,</span>
<span id="cb287-8"><a href="#cb287-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"North Carolina"</span>, <span class="st">"South Carolina"</span>, <span class="st">"Virginia"</span>, <span class="st">"West Virginia"</span>,</span>
<span id="cb287-9"><a href="#cb287-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Alabama"</span>, <span class="st">"Kentucky"</span>, <span class="st">"Mississippi"</span>, <span class="st">"Tennessee"</span>, <span class="st">"Arkansas"</span>,</span>
<span id="cb287-10"><a href="#cb287-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Louisiana"</span>, <span class="st">"Oklahoma"</span>, <span class="st">"Texas"</span></span>
<span id="cb287-11"><a href="#cb287-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb287-12"><a href="#cb287-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-13"><a href="#cb287-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: South summary</span></span>
<span id="cb287-14"><a href="#cb287-14" aria-hidden="true" tabindex="-1"></a>south_summary <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb287-15"><a href="#cb287-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state_name <span class="sc">%in%</span> south_states, year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb287-16"><a href="#cb287-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb287-17"><a href="#cb287-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb287-18"><a href="#cb287-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_snap_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-19"><a href="#cb287-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_median_income =</span> <span class="fu">mean</span>(median_household_income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-20"><a href="#cb287-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_poverty_rate =</span> <span class="fu">mean</span>(poverty_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-21"><a href="#cb287-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_unemployment_rate =</span> <span class="fu">mean</span>(unemployment_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-22"><a href="#cb287-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb287-23"><a href="#cb287-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb287-24"><a href="#cb287-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="st">"Census South"</span>)</span>
<span id="cb287-25"><a href="#cb287-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-26"><a href="#cb287-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: National summary</span></span>
<span id="cb287-27"><a href="#cb287-27" aria-hidden="true" tabindex="-1"></a>national_summary <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb287-28"><a href="#cb287-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb287-29"><a href="#cb287-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb287-30"><a href="#cb287-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb287-31"><a href="#cb287-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_snap_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-32"><a href="#cb287-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_median_income =</span> <span class="fu">mean</span>(median_household_income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-33"><a href="#cb287-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_poverty_rate =</span> <span class="fu">mean</span>(poverty_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-34"><a href="#cb287-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_unemployment_rate =</span> <span class="fu">mean</span>(unemployment_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb287-35"><a href="#cb287-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb287-36"><a href="#cb287-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb287-37"><a href="#cb287-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="st">"National"</span>)</span>
<span id="cb287-38"><a href="#cb287-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-39"><a href="#cb287-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Combine</span></span>
<span id="cb287-40"><a href="#cb287-40" aria-hidden="true" tabindex="-1"></a>combined_summary <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(south_summary, national_summary)</span>
<span id="cb287-41"><a href="#cb287-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-42"><a href="#cb287-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Reshape for plotting</span></span>
<span id="cb287-43"><a href="#cb287-43" aria-hidden="true" tabindex="-1"></a>combined_long <span class="ot">&lt;-</span> combined_summary <span class="sc">|&gt;</span></span>
<span id="cb287-44"><a href="#cb287-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb287-45"><a href="#cb287-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(avg_snap_rate, avg_median_income, avg_poverty_rate, avg_unemployment_rate),</span>
<span id="cb287-46"><a href="#cb287-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb287-47"><a href="#cb287-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb287-48"><a href="#cb287-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb287-49"><a href="#cb287-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-50"><a href="#cb287-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Plot</span></span>
<span id="cb287-51"><a href="#cb287-51" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(combined_long, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> value, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb287-52"><a href="#cb287-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb287-53"><a href="#cb287-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb287-54"><a href="#cb287-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb287-55"><a href="#cb287-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb287-56"><a href="#cb287-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Trends in Census South vs National (2015–2019)"</span>,</span>
<span id="cb287-57"><a href="#cb287-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb287-58"><a href="#cb287-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb287-59"><a href="#cb287-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Region"</span></span>
<span id="cb287-60"><a href="#cb287-60" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb287-61"><a href="#cb287-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize average SNAP participation by state for 2019</span></span>
<span id="cb288-2"><a href="#cb288-2" aria-hidden="true" tabindex="-1"></a>state_bar_data <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb288-3"><a href="#cb288-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>, state_name <span class="sc">%in%</span> south_states) <span class="sc">|&gt;</span></span>
<span id="cb288-4"><a href="#cb288-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state_name) <span class="sc">|&gt;</span></span>
<span id="cb288-5"><a href="#cb288-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb288-6"><a href="#cb288-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_snap_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb288-7"><a href="#cb288-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb288-8"><a href="#cb288-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb288-9"><a href="#cb288-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-10"><a href="#cb288-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the bar plot</span></span>
<span id="cb288-11"><a href="#cb288-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state_bar_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(state_name, avg_snap_rate), <span class="at">y =</span> avg_snap_rate)) <span class="sc">+</span></span>
<span id="cb288-12"><a href="#cb288-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb288-13"><a href="#cb288-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span>  <span class="co"># Flip for easier label reading</span></span>
<span id="cb288-14"><a href="#cb288-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb288-15"><a href="#cb288-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Average SNAP Participation Rate by State (Census South, 2019)"</span>,</span>
<span id="cb288-16"><a href="#cb288-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"State"</span>,</span>
<span id="cb288-17"><a href="#cb288-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Participation Rate"</span></span>
<span id="cb288-18"><a href="#cb288-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb288-19"><a href="#cb288-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="snap-participation-by-median-household-income-bracket" class="level3">
<h3 class="anchored" data-anchor-id="snap-participation-by-median-household-income-bracket">SNAP Participation by Median Household Income Bracket</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group, summarize, and order income brackets</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a>snap_income_brackets_south <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state_name <span class="sc">%in%</span> south_states, <span class="sc">!</span><span class="fu">is.na</span>(median_household_income)) <span class="sc">|&gt;</span></span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb289-5"><a href="#cb289-5" aria-hidden="true" tabindex="-1"></a>    median_household_income <span class="sc">&lt;</span> <span class="dv">30000</span> <span class="sc">~</span> <span class="st">"&lt;$30k"</span>,</span>
<span id="cb289-6"><a href="#cb289-6" aria-hidden="true" tabindex="-1"></a>    median_household_income <span class="sc">&gt;=</span> <span class="dv">30000</span> <span class="sc">&amp;</span> median_household_income <span class="sc">&lt;</span> <span class="dv">40000</span> <span class="sc">~</span> <span class="st">"$30k–39k"</span>,</span>
<span id="cb289-7"><a href="#cb289-7" aria-hidden="true" tabindex="-1"></a>    median_household_income <span class="sc">&gt;=</span> <span class="dv">40000</span> <span class="sc">&amp;</span> median_household_income <span class="sc">&lt;</span> <span class="dv">50000</span> <span class="sc">~</span> <span class="st">"$40k–49k"</span>,</span>
<span id="cb289-8"><a href="#cb289-8" aria-hidden="true" tabindex="-1"></a>    median_household_income <span class="sc">&gt;=</span> <span class="dv">50000</span> <span class="sc">&amp;</span> median_household_income <span class="sc">&lt;</span> <span class="dv">60000</span> <span class="sc">~</span> <span class="st">"$50k–59k"</span>,</span>
<span id="cb289-9"><a href="#cb289-9" aria-hidden="true" tabindex="-1"></a>    median_household_income <span class="sc">&gt;=</span> <span class="dv">60000</span> <span class="sc">&amp;</span> median_household_income <span class="sc">&lt;</span> <span class="dv">70000</span> <span class="sc">~</span> <span class="st">"$60k–69k"</span>,</span>
<span id="cb289-10"><a href="#cb289-10" aria-hidden="true" tabindex="-1"></a>    median_household_income <span class="sc">&gt;=</span> <span class="dv">70000</span> <span class="sc">~</span> <span class="st">"≥$70k"</span></span>
<span id="cb289-11"><a href="#cb289-11" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb289-12"><a href="#cb289-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(income_group) <span class="sc">|&gt;</span></span>
<span id="cb289-13"><a href="#cb289-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb289-14"><a href="#cb289-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_snap_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb289-15"><a href="#cb289-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_income =</span> <span class="fu">mean</span>(median_household_income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb289-16"><a href="#cb289-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_counties =</span> <span class="fu">n</span>(),</span>
<span id="cb289-17"><a href="#cb289-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb289-18"><a href="#cb289-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb289-19"><a href="#cb289-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb289-20"><a href="#cb289-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_of_counties =</span> <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> n_counties <span class="sc">/</span> <span class="fu">sum</span>(n_counties), <span class="dv">1</span>),</span>
<span id="cb289-21"><a href="#cb289-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">income_group =</span> <span class="fu">factor</span>(income_group, <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb289-22"><a href="#cb289-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;$30k"</span>, <span class="st">"$30k–39k"</span>, <span class="st">"$40k–49k"</span>, <span class="st">"$50k–59k"</span>, <span class="st">"$60k–69k"</span>, <span class="st">"≥$70k"</span></span>
<span id="cb289-23"><a href="#cb289-23" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb289-24"><a href="#cb289-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb289-25"><a href="#cb289-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-26"><a href="#cb289-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb289-27"><a href="#cb289-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(snap_income_brackets_south, <span class="fu">aes</span>(<span class="at">x =</span> income_group, <span class="at">y =</span> avg_snap_rate)) <span class="sc">+</span></span>
<span id="cb289-28"><a href="#cb289-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb289-29"><a href="#cb289-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(avg_snap_rate, <span class="dv">2</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb289-30"><a href="#cb289-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb289-31"><a href="#cb289-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Average SNAP Participation Rate by Income Bracket (South States)"</span>,</span>
<span id="cb289-32"><a href="#cb289-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Median Household Income Bracket"</span>,</span>
<span id="cb289-33"><a href="#cb289-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average SNAP Participation Rate"</span></span>
<span id="cb289-34"><a href="#cb289-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb289-35"><a href="#cb289-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This bar chart shows a clear inverse relationship between median household income and SNAP participation rates across Southern states. Counties with the lowest incomes (under $30k) have the highest average SNAP participation rate at 41%, while those with incomes over $70k have the lowest rate at just 10%. This trend highlights how economic disadvantage is strongly associated with greater reliance on SNAP benefits in the region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a>snap_white_summary <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb290-2"><a href="#cb290-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state_name <span class="sc">%in%</span> south_states, year <span class="sc">&lt;=</span> <span class="dv">2019</span>, <span class="sc">!</span><span class="fu">is.na</span>(white_pct)) <span class="sc">|&gt;</span></span>
<span id="cb290-3"><a href="#cb290-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb290-4"><a href="#cb290-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb290-5"><a href="#cb290-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_white_pct =</span> <span class="fu">mean</span>(white_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb290-6"><a href="#cb290-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_snap_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb290-7"><a href="#cb290-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb290-8"><a href="#cb290-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb290-9"><a href="#cb290-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb290-10"><a href="#cb290-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(snap_white_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
   year avg_white_pct avg_snap_rate
  &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
1  2015         0.675         0.224
2  2016         0.680         0.219
3  2017         0.676         0.208
4  2018         0.687         0.202
5  2019         0.661         0.189</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb292-2"><a href="#cb292-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb292-3"><a href="#cb292-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb292-4"><a href="#cb292-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-5"><a href="#cb292-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Summarize for South states by year</span></span>
<span id="cb292-6"><a href="#cb292-6" aria-hidden="true" tabindex="-1"></a>snap_white_nonwhite_summary <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb292-7"><a href="#cb292-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state_name <span class="sc">%in%</span> south_states, year <span class="sc">&lt;=</span> <span class="dv">2019</span>, <span class="sc">!</span><span class="fu">is.na</span>(white_pct)) <span class="sc">|&gt;</span></span>
<span id="cb292-8"><a href="#cb292-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">non_white_pct =</span> <span class="dv">1</span> <span class="sc">-</span> white_pct) <span class="sc">|&gt;</span></span>
<span id="cb292-9"><a href="#cb292-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb292-10"><a href="#cb292-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb292-11"><a href="#cb292-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_white_pct =</span> <span class="fu">mean</span>(white_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb292-12"><a href="#cb292-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_non_white_pct =</span> <span class="fu">mean</span>(non_white_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb292-13"><a href="#cb292-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_snap_rate =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb292-14"><a href="#cb292-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb292-15"><a href="#cb292-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb292-16"><a href="#cb292-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-17"><a href="#cb292-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Pivot to long format for plotting</span></span>
<span id="cb292-18"><a href="#cb292-18" aria-hidden="true" tabindex="-1"></a>snap_long <span class="ot">&lt;-</span> snap_white_nonwhite_summary <span class="sc">|&gt;</span></span>
<span id="cb292-19"><a href="#cb292-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb292-20"><a href="#cb292-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(avg_white_pct, avg_non_white_pct, avg_snap_rate),</span>
<span id="cb292-21"><a href="#cb292-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb292-22"><a href="#cb292-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb292-23"><a href="#cb292-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb292-24"><a href="#cb292-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-25"><a href="#cb292-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Clean variable labels</span></span>
<span id="cb292-26"><a href="#cb292-26" aria-hidden="true" tabindex="-1"></a>snap_long<span class="sc">$</span>variable <span class="ot">&lt;-</span> <span class="fu">recode</span>(snap_long<span class="sc">$</span>variable,</span>
<span id="cb292-27"><a href="#cb292-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">avg_white_pct =</span> <span class="st">"White Population (%)"</span>,</span>
<span id="cb292-28"><a href="#cb292-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">avg_non_white_pct =</span> <span class="st">"Non-White Population (%)"</span>,</span>
<span id="cb292-29"><a href="#cb292-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">avg_snap_rate =</span> <span class="st">"SNAP Participation Rate"</span></span>
<span id="cb292-30"><a href="#cb292-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb292-31"><a href="#cb292-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-32"><a href="#cb292-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Plot</span></span>
<span id="cb292-33"><a href="#cb292-33" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(snap_long, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb292-34"><a href="#cb292-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb292-35"><a href="#cb292-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb292-36"><a href="#cb292-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb292-37"><a href="#cb292-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"SNAP Participation and Demographic Composition Over Time (South States)"</span>,</span>
<span id="cb292-38"><a href="#cb292-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Rate / Percentage"</span></span>
<span id="cb292-39"><a href="#cb292-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb292-40"><a href="#cb292-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb292-41"><a href="#cb292-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>summary of zero participation counties by year</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Filter for 0% participation counties in the South, summarize by year</span></span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a>zero_participation_south <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb293-3"><a href="#cb293-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb293-4"><a href="#cb293-4" aria-hidden="true" tabindex="-1"></a>    state_name <span class="sc">%in%</span> south_states,</span>
<span id="cb293-5"><a href="#cb293-5" aria-hidden="true" tabindex="-1"></a>    snap_participation_rate <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb293-6"><a href="#cb293-6" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&lt;=</span> <span class="dv">2019</span></span>
<span id="cb293-7"><a href="#cb293-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb293-8"><a href="#cb293-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb293-9"><a href="#cb293-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_counties_zero_rate =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb293-10"><a href="#cb293-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb293-11"><a href="#cb293-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(zero_participation_south)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
   year num_counties_zero_rate
  &lt;dbl&gt;                  &lt;int&gt;
1  2015                      1
2  2016                      2
3  2017                      5
4  2018                      2
5  2019                      2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for South states only and up to 2019</span></span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a>state_extremes_south <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb295-3"><a href="#cb295-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state_name <span class="sc">%in%</span> south_states, year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb295-4"><a href="#cb295-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state_name) <span class="sc">|&gt;</span></span>
<span id="cb295-5"><a href="#cb295-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">state_avg =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb295-6"><a href="#cb295-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb295-7"><a href="#cb295-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> state_avg, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb295-8"><a href="#cb295-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">highest_state =</span> state_name, <span class="at">highest_rate =</span> state_avg) <span class="sc">|&gt;</span></span>
<span id="cb295-9"><a href="#cb295-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb295-10"><a href="#cb295-10" aria-hidden="true" tabindex="-1"></a>    snap_2model <span class="sc">|&gt;</span></span>
<span id="cb295-11"><a href="#cb295-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(state_name <span class="sc">%in%</span> south_states, year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb295-12"><a href="#cb295-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(year, state_name) <span class="sc">|&gt;</span></span>
<span id="cb295-13"><a href="#cb295-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">state_avg =</span> <span class="fu">mean</span>(snap_participation_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb295-14"><a href="#cb295-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb295-15"><a href="#cb295-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">slice_min</span>(<span class="at">order_by =</span> state_avg, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb295-16"><a href="#cb295-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(<span class="at">lowest_state =</span> state_name, <span class="at">lowest_rate =</span> state_avg),</span>
<span id="cb295-17"><a href="#cb295-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"year"</span></span>
<span id="cb295-18"><a href="#cb295-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb295-19"><a href="#cb295-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-20"><a href="#cb295-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(state_extremes_south)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
# Groups:   year [5]
   year highest_state highest_rate lowest_state lowest_rate
  &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;
1  2015 Mississippi          0.337 Texas              0.158
2  2016 Mississippi          0.288 Virginia           0.152
3  2017 Louisiana            0.261 Virginia           0.144
4  2018 Louisiana            0.252 Virginia           0.138
5  2019 West Virginia        0.240 Virginia           0.135</code></pre>
</div>
</div>
</section>
<section id="z-score-standardize-selected-predictors" class="level3">
<h3 class="anchored" data-anchor-id="z-score-standardize-selected-predictors">Z-score standardize selected predictors</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb297-2"><a href="#cb297-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-3"><a href="#cb297-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Z-score standardize selected predictors</span></span>
<span id="cb297-4"><a href="#cb297-4" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> snap_2model <span class="sc">|&gt;</span></span>
<span id="cb297-5"><a href="#cb297-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(poverty_pct, renter_pct, unemployment_rate, over_65_pct), scale)) <span class="sc">|&gt;</span></span>
<span id="cb297-6"><a href="#cb297-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(snap_participation_rate, poverty_pct, renter_pct, unemployment_rate, over_65_pct) <span class="sc">|&gt;</span></span>
<span id="cb297-7"><a href="#cb297-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>snap_participation_rate, <span class="at">names_to =</span> <span class="st">"predictor"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>)</span>
<span id="cb297-8"><a href="#cb297-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-9"><a href="#cb297-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Improved scatterplot</span></span>
<span id="cb297-10"><a href="#cb297-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plot_df, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">y =</span> snap_participation_rate)) <span class="sc">+</span></span>
<span id="cb297-11"><a href="#cb297-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.15</span>, <span class="at">color =</span> <span class="st">"gray"</span>, <span class="at">size =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb297-12"><a href="#cb297-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb297-13"><a href="#cb297-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> predictor, <span class="at">scales =</span> <span class="st">"free_x"</span>,</span>
<span id="cb297-14"><a href="#cb297-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">labeller =</span> <span class="fu">as_labeller</span>(<span class="fu">c</span>(</span>
<span id="cb297-15"><a href="#cb297-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">poverty_pct =</span> <span class="st">"Poverty (%)"</span>,</span>
<span id="cb297-16"><a href="#cb297-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">renter_pct =</span> <span class="st">"Renter Share (%)"</span>,</span>
<span id="cb297-17"><a href="#cb297-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">unemployment_rate =</span> <span class="st">"Unemployment (%)"</span>,</span>
<span id="cb297-18"><a href="#cb297-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">over_65_pct =</span> <span class="st">"Population Over 65 (%)"</span></span>
<span id="cb297-19"><a href="#cb297-19" aria-hidden="true" tabindex="-1"></a>             ))) <span class="sc">+</span></span>
<span id="cb297-20"><a href="#cb297-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb297-21"><a href="#cb297-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Standardized Predictors vs SNAP Participation Rate"</span>,</span>
<span id="cb297-22"><a href="#cb297-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Standardized Value (Z-Score)"</span>,</span>
<span id="cb297-23"><a href="#cb297-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"SNAP Participation Rate"</span></span>
<span id="cb297-24"><a href="#cb297-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb297-25"><a href="#cb297-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(snap_2model, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(rural_urban_score), <span class="at">y =</span> snap_participation_rate)) <span class="sc">+</span></span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Urban-Rural Code vs SNAP Participation"</span>, <span class="at">x =</span> <span class="st">"RUCC Code (1 = Urban, 9 = Most Rural)"</span>, <span class="at">y =</span> <span class="st">"SNAP Participation Rate"</span>) <span class="sc">+</span></span>
<span id="cb299-4"><a href="#cb299-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation test</span></span>
<span id="cb300-2"><a href="#cb300-2" aria-hidden="true" tabindex="-1"></a>cor_result <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(</span>
<span id="cb300-3"><a href="#cb300-3" aria-hidden="true" tabindex="-1"></a>  snap_2model<span class="sc">$</span>bachelor_or_higher_pct,</span>
<span id="cb300-4"><a href="#cb300-4" aria-hidden="true" tabindex="-1"></a>  snap_2model<span class="sc">$</span>snap_participation_rate,</span>
<span id="cb300-5"><a href="#cb300-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">use =</span> <span class="st">"complete.obs"</span></span>
<span id="cb300-6"><a href="#cb300-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb300-7"><a href="#cb300-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb300-8"><a href="#cb300-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cor_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  snap_2model$bachelor_or_higher_pct and snap_2model$snap_participation_rate
t = -53.655, df = 14142, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.4248625 -0.3974753
sample estimates:
       cor 
-0.4112617 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot with linear trend</span></span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(snap_2model, <span class="fu">aes</span>(<span class="at">x =</span> bachelor_or_higher_pct, <span class="at">y =</span> snap_participation_rate)) <span class="sc">+</span></span>
<span id="cb302-3"><a href="#cb302-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb302-4"><a href="#cb302-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb302-5"><a href="#cb302-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb302-6"><a href="#cb302-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"SNAP Participation vs % with Bachelor's Degree or Higher"</span>,</span>
<span id="cb302-7"><a href="#cb302-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">"Correlation:"</span>, <span class="fu">round</span>(cor_result<span class="sc">$</span>estimate, <span class="dv">2</span>)),</span>
<span id="cb302-8"><a href="#cb302-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"% Bachelor's Degree or Higher"</span>,</span>
<span id="cb302-9"><a href="#cb302-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"SNAP Participation Rate"</span></span>
<span id="cb302-10"><a href="#cb302-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb302-11"><a href="#cb302-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb304-3"><a href="#cb304-3" aria-hidden="true" tabindex="-1"></a>snap_2model <span class="sc">|&gt;</span></span>
<span id="cb304-4"><a href="#cb304-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(poverty_pct, median_household_income, disabled_pct, rural_urban_score) <span class="sc">|&gt;</span></span>
<span id="cb304-5"><a href="#cb304-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"variable"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb304-6"><a href="#cb304-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb304-7"><a href="#cb304-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb304-8"><a href="#cb304-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb304-9"><a href="#cb304-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distributions of Key Variables"</span>, <span class="at">x =</span> <span class="st">"Value"</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb304-10"><a href="#cb304-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(snap_2model, <span class="fu">aes</span>(<span class="at">x =</span> disabled_pct, <span class="at">y =</span> snap_participation_rate)) <span class="sc">+</span></span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb305-3"><a href="#cb305-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb305-4"><a href="#cb305-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb305-5"><a href="#cb305-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Disability Rate vs SNAP Participation Rate"</span>,</span>
<span id="cb305-6"><a href="#cb305-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Share of County Population with Disability"</span>,</span>
<span id="cb305-7"><a href="#cb305-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"SNAP Participation Rate"</span></span>
<span id="cb305-8"><a href="#cb305-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb305-9"><a href="#cb305-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="explanatory_analysis_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="training-models" class="level2">
<h2 class="anchored" data-anchor-id="training-models">Training models</h2>
</section>
<section id="testing-final-model" class="level2">
<h2 class="anchored" data-anchor-id="testing-final-model">Testing final model</h2>
</section>
<section id="implementing-model-fingers-crossed" class="level2">
<h2 class="anchored" data-anchor-id="implementing-model-fingers-crossed">Implementing model (fingers crossed)</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>